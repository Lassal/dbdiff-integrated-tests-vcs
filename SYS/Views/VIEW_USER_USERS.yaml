schema: SYS
name: USER_USERS
updatedAllowed: true
insertAllowed: true
viewDefinition: |-
  select
    u.name,
    u.user#,
    m.status,
    decode(
      mod(u.astatus, 16),
      4,
      u.ltime,
      5,
      u.ltime,
      6,
      u.ltime,
      8,
      u.ltime,
      9,
      u.ltime,
      10,
      u.ltime,
      to_date(NULL)
    ),
    decode(
      mod(u.astatus, 16),
      1,
      u.exptime,
      2,
      u.exptime,
      5,
      u.exptime,
      6,
      u.exptime,
      9,
      u.exptime,
      10,
      u.exptime,
      decode(
        u.ptime,
        '',
        to_date(NULL),
        decode(
          p.limit#,
          2147483647,
          to_date(NULL),
          decode(
            p.limit#,
            0,
            decode(
              dp.limit#,
              2147483647,
              to_date(NULL),
              u.ptime + dp.limit# / 86400
            ),
            u.ptime + p.limit# / 86400
          )
        )
      )
    ),
    dts.name,
    tts.name,
    u.ctime,
    nvl(cgm.consumer_group, 'DEFAULT_CONSUMER_GROUP'),
    u.ext_username,
    decode(
      bitand(u.spare1, 2080),
      32,
      'Y',
      2048,
      'Y',
      2080,
      'Y',
      'N'
    ),
    decode(bitand(u.spare1, 128), 128, 'YES', 'NO'),
    decode(bitand(u.spare1, 256), 256, 'Y', 'N')
  from
    sys.user$ u
    left outer join sys.resource_group_mapping$ cgm on (
      cgm.attribute = 'ORACLE_USER'
      and cgm.status = 'ACTIVE'
      and cgm.value = u.name
    ),
    sys.ts$ dts,
    sys.ts$ tts,
    sys.user_astatus_map m,
    profile$ p,
    profile$ dp
  where
    u.datats# = dts.ts#
    and u.tempts# = tts.ts#
    and (
      (u.astatus = m.status#)
      or (
        u.astatus = (m.status# + 16 - BITAND(m.status#, 16))
      )
    )
    and u.type# = 1
    and u.user# = userenv('SCHEMAID')
    and u.resource$ = p.profile#
    and dp.profile# = 0
    and dp.type# = 1
    and dp.resource# = 1
    and p.type# = 1
    and p.resource# = 1
columns: []
referencedTables: []

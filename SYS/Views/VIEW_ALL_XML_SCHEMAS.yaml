schema: SYS
name: ALL_XML_SCHEMAS
updatedAllowed: true
insertAllowed: true
columns:
- name: BINARY
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 3
- name: HIDDEN
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 10
  dataTypeLength: 3
- name: HIER_TYPE
  dataType: VARCHAR2
  textMaxLength: 11
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 11
- name: INT_OBJNAME
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 4000
- name: LOCAL
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 3
- name: OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: QUAL_SCHEMA_URL
  dataType: VARCHAR2
  textMaxLength: 865
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 865
- name: SCHEMA
  dataType: XMLTYPE
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: SCHEMA_ID
  dataType: RAW
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: SCHEMA_URL
  dataType: VARCHAR2
  textMaxLength: 700
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 700
referencedTables:
- schema: SYS
  name: USER$
- schema: XDB
  name: XDB$SCHEMA
viewDefinition: |-
  select
    u.name,
    s.xmldata.schema_url,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16 then 'NO'
      else 'YES'
    end,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16384) = 16384 then xdb.dbms_csx_int.GetCSXSchema(xmltype(value(s) .getclobval()))
      else value(s)
    end,
    xdb.dbms_xmlschema_int.xdb$Oid2IntName(s.object_id),
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16 then s.xmldata.schema_url
      else 'http://xmlns.oracle.com/xdb/schemas/' || s.xmldata.schema_owner || '/' || case
        when substr(s.xmldata.schema_url, 1, 7) = 'http://' then substr(s.xmldata.schema_url, 8)
        else s.xmldata.schema_url
      end
    end,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 128) = 128 then 'NONE'
      else case
        when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 64) = 64 then 'RESMETADATA'
        else 'CONTENTS'
      end
    end,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16384) = 16384 then 'YES'
      else 'NO'
    end,
    s.sys_nc_oid$,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 32768) = 32768 then 'YES'
      else 'NO'
    end
  from
    user $ u,
    xdb.xdb$schema s
  where
    u.user# = userenv('SCHEMAID')
    and u.name = s.xmldata.schema_owner
  union all
  select
    s.xmldata.schema_owner,
    s.xmldata.schema_url,
    'NO',
    value(s),
    xdb.dbms_xmlschema_int.xdb$Oid2IntName(s.object_id),
    s.xmldata.schema_url,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 128) = 128 then 'NONE'
      else case
        when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 64) = 64 then 'RESMETADATA'
        else 'CONTENTS'
      end
    end,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16384) = 16384 then 'YES'
      else 'NO'
    end,
    s.sys_nc_oid$,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 32768) = 32768 then 'YES'
      else 'NO'
    end
  from
    xdb.xdb$schema s
  where
    bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16
    and s.xmldata.schema_url not in (
      select
        s2.xmldata.schema_url
      from
        xdb.xdb$schema s2,
        user $ u2
      where
        u2.user# = userenv('SCHEMAID')
        and u2.name = s.xmldata.schema_owner
    )

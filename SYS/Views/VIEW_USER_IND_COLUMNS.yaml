schema: SYS
name: USER_IND_COLUMNS
updatedAllowed: true
insertAllowed: true
columns:
- name: CHAR_LENGTH
  dataType: NUMBER
  nullable: true
  ordinalPosition: 6
  dataTypeLength:
- name: COLUMN_LENGTH
  dataType: NUMBER
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: COLUMN_NAME
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 4000
- name: COLUMN_POSITION
  dataType: NUMBER
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: DESCEND
  dataType: VARCHAR2
  textMaxLength: 4
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 4
- name: INDEX_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: TABLE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 128
referencedTables:
- schema: SYS
  name: ATTRCOL$
- schema: SYS
  name: COL$
- schema: SYS
  name: ICOL$
- schema: SYS
  name: IND$
- schema: SYS
  name: OBJ$
viewDefinition: |-
  select
    idx.name,
    base.name,
    decode(
      bitand(c .property, 1024),
      1024,
      (
        select
          decode(bitand(tc.property, 1), 1, ac.name, tc.name)
        from
          sys.col$ tc,
          attrcol$ ac
        where
          tc.intcol# = c .intcol# -1
          and tc.obj# = c .obj#
          and tc.obj# = ac.obj#(+)
          and tc.intcol# = ac.intcol#(+)
      ),
      decode(ac.name, null, c .name, ac.name)
    ),
    ic.pos#,
    c .length,
    c .spare3,
    decode(
      bitand(c .property, 131072),
      131072,
      'DESC',
      'ASC'
    )
  from
    sys.col$ c,
    sys.obj$ idx,
    sys.obj$ base,
    sys.icol$ ic,
    sys.ind$ i,
    sys.attrcol$ ac
  where
    c .obj# = base.obj#
    and ic.bo# = base.obj#
    and decode(bitand(i.property, 1024), 0, ic.intcol#, ic.spare2) = c .intcol#
    and base.owner# = userenv('SCHEMAID')
    and base.namespace in (1, 5)
    /* table or cluster namespace */
    and ic.obj# = idx.obj#
    and idx.obj# = i.obj#
    and i.type# in (1, 2, 3, 4, 6, 7, 9)
    and c .obj# = ac.obj#(+)
    and c .intcol# = ac.intcol#(+)
  union all
  select
    idx.name,
    base.name,
    decode(
      bitand(c .property, 1024),
      1024,
      (
        select
          decode(bitand(tc.property, 1), 1, ac.name, tc.name)
        from
          sys.col$ tc,
          attrcol$ ac
        where
          tc.intcol# = c .intcol# -1
          and tc.obj# = c .obj#
          and tc.obj# = ac.obj#(+)
          and tc.intcol# = ac.intcol#(+)
      ),
      decode(ac.name, null, c .name, ac.name)
    ),
    ic.pos#,
    c .length,
    c .spare3,
    decode(
      bitand(c .property, 131072),
      131072,
      'DESC',
      'ASC'
    )
  from
    sys.col$ c,
    sys.obj$ idx,
    sys.obj$ base,
    sys.icol$ ic,
    sys.ind$ i,
    sys.attrcol$ ac
  where
    c .obj# = base.obj#
    and i.bo# = base.obj#
    and base.owner# != userenv('SCHEMAID')
    and decode(bitand(i.property, 1024), 0, ic.intcol#, ic.spare2) = c .intcol#
    and idx.owner# = userenv('SCHEMAID')
    and idx.namespace = 4
    /* index namespace */
    and ic.obj# = idx.obj#
    and idx.obj# = i.obj#
    and i.type# in (1, 2, 3, 4, 6, 7, 9)
    and c .obj# = ac.obj#(+)
    and c .intcol# = ac.intcol#(+)

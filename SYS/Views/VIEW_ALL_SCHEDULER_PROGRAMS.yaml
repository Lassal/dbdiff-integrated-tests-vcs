schema: SYS
name: ALL_SCHEDULER_PROGRAMS
updatedAllowed: true
insertAllowed: true
columns: []
referencedTables: []
viewDefinition: |-
  SELECT
    u.name,
    o.name,
    DECODE(
      bitand(p.flags, 2 + 4 + 8 + 16 + 32 + 2048 + 4096 + 8192),
      2,
      'PLSQL_BLOCK',
      4,
      'STORED_PROCEDURE',
      32,
      'EXECUTABLE',
      2048,
      'EXTERNAL_SCRIPT',
      4096,
      'SQL_SCRIPT',
      8192,
      'BACKUP_SCRIPT',
      ''
    ),
    p.action,
    p.number_of_args,
    DECODE(BITAND(p.flags, 1), 0, 'FALSE', 1, 'TRUE'),
    DECODE(BITAND(p.flags, 256), 0, 'FALSE', 'TRUE'),
    p.schedule_limit,
    p.priority,
    p.job_weight,
    p.max_runs,
    p.max_failures,
    p.max_run_duration,
    p.nls_env,
    p.comments
  FROM
    obj$ o,
    user $ u,
    sys.scheduler$_program p
  WHERE
    p.obj# = o.obj#
    AND u.user# = o.owner#
    AND (
      o.owner# = userenv('SCHEMAID')
      or o.obj# in (
        select
          oa.obj#
        from
          sys.objauth$ oa
        where
          grantee# in (
            select
              kzsrorol
            from
              x$kzsro
          )
      )
      or
      /* user has system privileges */
      (
        exists (
          select
            null
          from
            v$enabledprivs
          where
            priv_number in (
              -265
              /* CREATE ANY JOB */,
              -255
              /* EXPORT FULL DATABASE */,
              -266
              /* EXECUTE ANY PROGRAM */
            )
        )
        and o.owner# != 0
      )
    )

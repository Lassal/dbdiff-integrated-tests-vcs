schema: SYS
name: ALL_XML_SCHEMAS2
updatedAllowed: true
insertAllowed: true
viewDefinition: |-
  select
    u.name,
    s.xmldata.schema_url,
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16 then 'NO'
      else 'YES'
    end,
    xdb.dbms_xmlschema_int.xdb$Oid2IntName(s.object_id),
    case
      when bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16 then s.xmldata.schema_url
      else 'http://xmlns.oracle.com/xdb/schemas/' || s.xmldata.schema_owner || '/' || case
        when substr(s.xmldata.schema_url, 1, 7) = 'http://' then substr(s.xmldata.schema_url, 8)
        else s.xmldata.schema_url
      end
    end
  from
    user $ u,
    xdb.xdb$schema s
  where
    u.user# = userenv('SCHEMAID')
    and u.name = s.xmldata.schema_owner
  union all
  select
    s.xmldata.schema_owner,
    s.xmldata.schema_url,
    'NO',
    xdb.dbms_xmlschema_int.xdb$Oid2IntName(s.object_id),
    s.xmldata.schema_url
  from
    xdb.xdb$schema s
  where
    bitand(to_number(s.xmldata.flags, 'xxxxxxxx'), 16) = 16
    and s.xmldata.schema_url not in (
      select
        s2.xmldata.schema_url
      from
        xdb.xdb$schema s2,
        user $ u2
      where
        u2.user# = userenv('SCHEMAID')
        and u2.name = s.xmldata.schema_owner
    )
columns: []
referencedTables: []

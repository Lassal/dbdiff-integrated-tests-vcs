schema: SYS
name: USER_QUEUE_TABLES
updatedAllowed: true
insertAllowed: true
columns:
- name: COMPATIBLE
  dataType: VARCHAR2
  textMaxLength: 6
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 6
- name: MESSAGE_GROUPING
  dataType: VARCHAR2
  textMaxLength: 13
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 13
- name: OBJECT_TYPE
  dataType: VARCHAR2
  textMaxLength: 257
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 257
- name: OWNER_INSTANCE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: PRIMARY_INSTANCE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 8
  dataTypeLength:
- name: QUEUE_TABLE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: RECIPIENTS
  dataType: VARCHAR2
  textMaxLength: 8
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 8
- name: SECONDARY_INSTANCE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: SECURE
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 12
  dataTypeLength: 3
- name: SORT_ORDER
  dataType: VARCHAR2
  textMaxLength: 22
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 22
- name: TYPE
  dataType: VARCHAR2
  textMaxLength: 7
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 7
- name: USER_COMMENT
  dataType: VARCHAR2
  textMaxLength: 50
  nullable: true
  ordinalPosition: 11
  dataTypeLength: 50
referencedTables:
- schema: SYS
  name: AQ$_QUEUE_TABLE_AFFINITIES
- schema: SYS
  name: COL$
- schema: SYS
  name: COLTYPE$
- schema: SYS
  name: OBJ$
- schema: SYS
  name: USER$
- schema: SYSTEM
  name: AQ$_QUEUE_TABLES
viewDefinition: |-
  select
    t.name QUEUE_TABLE,
    decode(
      t.udata_type,
      1,
      'OBJECT',
      2,
      'VARIANT',
      3,
      'RAW'
    ) TYPE,
    tc.name || '.' || o.name OBJECT_TYPE,
    decode(
      t.sort_cols,
      0,
      'NONE',
      1,
      'PRIORITY',
      2,
      'ENQUEUE_TIME',
      3,
      'PRIORITY, ENQUEUE_TIME',
      4,
      'COMMIT_TIME',
      5,
      'PRIORITY, COMMIT_TIME',
      7,
      'ENQUEUE_TIME, PRIORITY'
    ) SORT_ORDER,
    decode(bitand(t.flags, 1), 1, 'MULTIPLE', 0, 'SINGLE') RECIPIENTS,
    decode(
      bitand(t.flags, 2),
      2,
      'TRANSACTIONAL',
      0,
      'NONE'
    ) MESSAGE_GROUPING,
    decode(
      bitand(t.flags, 8192 + 8),
      8192 + 8,
      '10.0.0',
      8,
      '8.1.3',
      0,
      '8.0.3'
    ) COMPATIBLE,
    aft.primary_instance PRIMARY_INSTANCE,
    aft.secondary_instance SECONDARY_INSTANCE,
    aft.owner_instance OWNER_INSTANCE,
    substr(t.table_comment, 1, 50) USER_COMMENT,
    decode(bitand(t.flags, 4096), 4096, 'YES', 0, 'NO') SECURE
  from
    system.aq$_queue_tables t,
    sys.col$ c,
    sys.coltype$ ct,
    sys.obj$ o,
    sys.user$ tc,
    sys.user$ qc,
    sys.aq$_queue_table_affinities aft
  where
    c .intcol# = ct.intcol#
    and c .obj# = ct.obj#
    and c .name = 'USER_DATA'
    and t.objno = c .obj#
    and o.oid$ = ct.toid
    and o.type# = 13
    and o.owner# = tc.user#
    and qc.user# = USERENV('SCHEMAID')
    and qc.name = t.schema
    and t.objno = aft.table_objno
  union
  select
    t.name QUEUE_TABLE,
    decode(
      t.udata_type,
      1,
      'OBJECT',
      2,
      'VARIANT',
      3,
      'RAW'
    ) TYPE,
    null OBJECT_TYPE,
    decode(
      t.sort_cols,
      0,
      'NONE',
      1,
      'PRIORITY',
      2,
      'ENQUEUE_TIME',
      3,
      'PRIORITY, ENQUEUE_TIME',
      4,
      'COMMIT_TIME',
      5,
      'PRIORITY, COMMIT_TIME',
      7,
      'ENQUEUE_TIME, PRIORITY'
    ) SORT_ORDER,
    decode(bitand(t.flags, 1), 1, 'MULTIPLE', 0, 'SINGLE') RECIPIENTS,
    decode(
      bitand(t.flags, 2),
      2,
      'TRANSACTIONAL',
      0,
      'NONE'
    ) MESSAGE_GROUPING,
    decode(
      bitand(t.flags, 8192 + 8),
      8192 + 8,
      '10.0.0',
      8,
      '8.1.3',
      0,
      '8.0.3'
    ) COMPATIBLE,
    aft.primary_instance PRIMARY_INSTANCE,
    aft.secondary_instance SECONDARY_INSTANCE,
    aft.owner_instance OWNER_INSTANCE,
    substr(t.table_comment, 1, 50) USER_COMMENT,
    decode(bitand(t.flags, 4096), 4096, 'YES', 0, 'NO') SECURE
  from
    system.aq$_queue_tables t,
    sys.user$ qc,
    sys.aq$_queue_table_affinities aft
  where
    (
      t.udata_type = 2
      or t.udata_type = 3
    )
    and qc.user# = USERENV('SCHEMAID')
    and qc.name = t.schema
    and t.objno = aft.table_objno

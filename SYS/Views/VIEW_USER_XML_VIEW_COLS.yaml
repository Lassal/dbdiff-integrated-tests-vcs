schema: SYS
name: USER_XML_VIEW_COLS
updatedAllowed: true
insertAllowed: true
columns: []
referencedTables: []
viewDefinition: |-
  select
    o.name,
    decode(bitand(tc.property, 1), 1, attr.name, tc.name),
    null,
    null,
    null
  from
    sys.opqtype$ opq,
    sys.view$ v,
    sys.obj$ o,
    sys.coltype$ ac,
    sys.col$ tc,
    sys.attrcol$ attr
  where
    o.owner# = userenv('SCHEMAID')
    and o.obj# = v.obj#
    and bitand(v.property, 1) = 1
    and v.obj# = tc.obj#
    and tc.obj# = ac.obj#
    and tc.intcol# = ac.intcol#
    and ac.toid = '00000000000000000000000000020100'
    and tc.intcol# = opq.intcol#
    and tc.obj# = opq.obj#
    and tc.obj# = attr.obj#(+)
    and tc.intcol# = attr.intcol#(+)
    and bitand(opq.flags, 2) = 0
  union all
  select
    o.name,
    decode(bitand(tc.property, 1), 1, attr.name, tc.name),
    schm.xmldata.schema_url,
    schm.xmldata.schema_owner,
    decode(
      xel.xmldata.property.name,
      null,
      xel.xmldata.property.propref_name.name,
      xel.xmldata.property.name
    )
  from
    xdb.xdb$element xel,
    xdb.xdb$schema schm,
    sys.opqtype$ opq,
    sys.view$ v,
    sys.obj$ o,
    sys.coltype$ ac,
    sys.col$ tc,
    sys.attrcol$ attr
  where
    o.owner# = userenv('SCHEMAID')
    and o.obj# = v.obj#
    and bitand(v.property, 1) = 1
    and v.obj# = tc.obj#
    and tc.obj# = ac.obj#
    and tc.intcol# = ac.intcol#
    and ac.toid = '00000000000000000000000000020100'
    and tc.intcol# = opq.intcol#
    and tc.obj# = opq.obj#
    and tc.obj# = attr.obj#(+)
    and tc.intcol# = attr.intcol#(+)
    and opq.schemaoid = schm.sys_nc_oid$
    and opq.elemnum = xel.xmldata.property.prop_number

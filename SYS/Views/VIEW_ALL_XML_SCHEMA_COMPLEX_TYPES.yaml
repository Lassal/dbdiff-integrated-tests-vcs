schema: SYS
name: ALL_XML_SCHEMA_COMPLEX_TYPES
updatedAllowed: true
insertAllowed: true
columns:
- name: BASE_NAME
  dataType: VARCHAR2
  textMaxLength: 256
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 256
- name: BASE_SCHEMA_URL
  dataType: VARCHAR2
  textMaxLength: 700
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 700
- name: BASE_TARGET_NAMESPACE
  dataType: VARCHAR2
  textMaxLength: 2000
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 2000
- name: COMPLEX_TYPE
  dataType: XMLTYPE
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: COMPLEX_TYPE_NAME
  dataType: VARCHAR2
  textMaxLength: 256
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 256
- name: MAINTAIN_DOM
  dataType: RAW
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: SCHEMA_URL
  dataType: VARCHAR2
  textMaxLength: 700
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 700
- name: SQL_SCHEMA
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 11
  dataTypeLength: 128
- name: SQL_TYPE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 10
  dataTypeLength: 128
- name: TARGET_NAMESPACE
  dataType: VARCHAR2
  textMaxLength: 2000
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 2000
referencedTables:
- schema: SYS
  name: ALL_XML_SCHEMAS
- schema: XDB
  name: XDB$COMPLEX_TYPE
- schema: XDB
  name: XDB$SCHEMA
- schema: XDB
  name: XDB$SIMPLE_TYPE
viewDefinition: |-
  select
    s.xmldata.schema_owner OWNER,
    s.xmldata.schema_url SCHEMA_URL,
    s.xmldata.target_namespace TARGET_NAMESPACE,
    ct.xmldata.name COMPLEX_TYPE_NAME,
    value(ct) COMPLEX_TYPE,
    (
      case
        when ct.xmldata.BASE_TYPE IS NULL then NULL
        when (
          select
            count(1)
          from
            xdb.xdb$simple_type st
          where
            ct.xmldata.BASE_TYPE = ref(st)
        ) != 0 then (
          select
            st.xmldata.name
          from
            xdb.xdb$simple_type st
          where
            ct.xmldata.BASE_TYPE = ref(st)
        )
        else (
          select
            ctb.xmldata.name
          from
            xdb.xdb$complex_type ctm,
            xdb.xdb$complex_type ctb
          where
            ref(ct) = ref(ctm)
            and ctm.xmldata.BASE_TYPE = ref(ctb)
        )
      end
    ) BASE_NAME,
    (
      case
        when ct.xmldata.BASE_TYPE IS NULL then NULL
        when (
          select
            count(1)
          from
            xdb.xdb$simple_type st
          where
            ct.xmldata.BASE_TYPE = ref(st)
        ) != 0 then (
          select
            s.xmldata.schema_url
          from
            xdb.xdb$simple_type st,
            xdb.xdb$schema s
          where
            ct.xmldata.BASE_TYPE = ref(st)
            and sys_op_r2o(st.xmldata.parent_schema) = s.sys_nc_oid$
        )
        else (
          select
            s.xmldata.schema_url
          from
            xdb.xdb$complex_type ctm,
            xdb.xdb$complex_type ctb,
            xdb.xdb$schema s
          where
            ref(ct) = ref(ctm)
            and ctm.xmldata.BASE_TYPE = ref(ctb)
            and sys_op_r2o(ctb.xmldata.parent_schema) = s.sys_nc_oid$
        )
      end
    ) BASE_SCHEMA_URL,
    (
      case
        when ct.xmldata.BASE_TYPE IS NULL then NULL
        when (
          select
            count(1)
          from
            xdb.xdb$simple_type st
          where
            ct.xmldata.BASE_TYPE = ref(st)
        ) != 0 then (
          select
            s.xmldata.target_namespace
          from
            xdb.xdb$simple_type st,
            xdb.xdb$schema s
          where
            ct.xmldata.BASE_TYPE = ref(st)
            and sys_op_r2o(st.xmldata.parent_schema) = s.sys_nc_oid$
        )
        else (
          select
            s.xmldata.target_namespace
          from
            xdb.xdb$complex_type ctm,
            xdb.xdb$complex_type ctb,
            xdb.xdb$schema s
          where
            ref(ct) = ref(ctm)
            and ctm.xmldata.BASE_TYPE = ref(ctb)
            and sys_op_r2o(ctb.xmldata.parent_schema) = s.sys_nc_oid$
        )
      end
    ) BASE_TARGET_NAMESPACE,
    ct.xmldata.maintain_dom MAINTAIN_DOM,
    ct.xmldata.sqltype SQL_TYPE,
    ct.xmldata.SQLSCHEMA SQL_SCHEMA
  from
    xdb.xdb$schema s,
    xdb.xdb$complex_type ct,
    all_xml_schemas a
  where
    sys_op_r2o(ct.xmldata.parent_schema) = s.sys_nc_oid$
    and s.xmldata.schema_owner = a .owner
    and s.xmldata.schema_url = a .schema_url

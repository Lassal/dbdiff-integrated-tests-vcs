schema: SYS
name: ALL_TYPES
updatedAllowed: true
insertAllowed: true
columns: []
referencedTables: []
viewDefinition: |-
  select
    u.name,
    o.name,
    t.toid,
    decode(
      t.typecode,
      108,
      'OBJECT',
      122,
      'COLLECTION',
      o.name
    ),
    t.attributes,
    t.methods,
    decode(bitand(t.properties, 16), 16, 'YES', 0, 'NO'),
    decode(bitand(t.properties, 256), 256, 'YES', 0, 'NO'),
    decode(bitand(t.properties, 8), 8, 'NO', 'YES'),
    decode(bitand(t.properties, 65536), 65536, 'NO', 'YES'),
    su.name,
    so.name,
    t.local_attrs,
    t.local_methods,
    t.typeid
  from
    sys.user$ u,
    sys.type$ t,
    sys. "_CURRENT_EDITION_OBJ" o,
    sys. "_CURRENT_EDITION_OBJ" so,
    sys.user$ su
  where
    bitand(t.properties, 64) != 64 -- u.name
    and o.owner# = u.user#
    and o.oid$ = t.tvoid
    and o.subname IS NULL -- only the most recent version
    and o.type# <> 10 -- must not be invalid
    and bitand(t.properties, 2048) = 0 -- not system-generated
    and t.supertoid = so.oid$ (+)
    and so.owner# = su.user# (+)
    and t.package_obj# IS NULL -- no PL/SQL types
    and (
      o.owner# = userenv('SCHEMAID')
      or o.obj# in (
        select
          oa.obj#
        from
          sys.objauth$ oa
        where
          grantee# in (
            select
              kzsrorol
            from
              x$kzsro
          )
      )
      or
      /* user has system privileges */
      exists (
        select
          null
        from
          v$enabledprivs
        where
          priv_number in (
            -184
            /* EXECUTE ANY TYPE */,
            -181
            /* CREATE ANY TYPE */
          )
      )
    )
  UNION
  select
    null,
    o.name,
    t.toid,
    decode(
      t.typecode,
      108,
      'OBJECT',
      122,
      'COLLECTION',
      o.name
    ),
    t.attributes,
    t.methods,
    decode(bitand(t.properties, 16), 16, 'YES', 0, 'NO'),
    decode(bitand(t.properties, 256), 256, 'YES', 0, 'NO'),
    decode(bitand(t.properties, 8), 8, 'NO', 'YES'),
    decode(bitand(t.properties, 65536), 65536, 'NO', 'YES'),
    su.name,
    so.name,
    t.local_attrs,
    t.local_methods,
    t.typeid
  from
    sys.type$ t,
    sys. "_CURRENT_EDITION_OBJ" o,
    sys. "_CURRENT_EDITION_OBJ" so,
    sys.user$ su
  where
    bitand(t.properties, 64) = 64 -- u.name is null
    and o.oid$ = t.tvoid
    and o.subname IS NULL -- only the most recent version
    and o.type# <> 10 -- must not be invalid
    and bitand(t.properties, 2048) = 0 -- not system-generated
    and t.supertoid = so.oid$ (+)
    and so.owner# = su.user# (+)
    and t.package_obj# IS NULL -- no PL/SQL types
    and (
      o.owner# = userenv('SCHEMAID')
      or o.obj# in (
        select
          oa.obj#
        from
          sys.objauth$ oa
        where
          grantee# in (
            select
              kzsrorol
            from
              x$kzsro
          )
      )
      or
      /* user has system privileges */
      exists (
        select
          null
        from
          v$enabledprivs
        where
          priv_number in (
            -184
            /* EXECUTE ANY TYPE */,
            -181
            /* CREATE ANY TYPE */
          )
      )
    )

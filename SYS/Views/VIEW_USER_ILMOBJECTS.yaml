schema: SYS
name: USER_ILMOBJECTS
updatedAllowed: true
insertAllowed: true
columns:
- name: DELETED
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 3
- name: ENABLED
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 3
- name: INHERITED_FROM
  dataType: VARCHAR2
  textMaxLength: 20
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 20
- name: OBJECT_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 128
- name: OBJECT_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 128
- name: OBJECT_TYPE
  dataType: VARCHAR2
  textMaxLength: 18
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 18
- name: POLICY_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: SUBOBJECT_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 128
referencedTables:
- schema: SYS
  name: ILM$
- schema: SYS
  name: ILMOBJ$
- schema: SYS
  name: OBJ$
- schema: SYS
  name: REDEF_OBJECT$
- schema: SYS
  name: TS$
- schema: SYS
  name: TSQ$
- schema: SYS
  name: USER$
- schema: SYS
  name: V$ENABLEDPRIVS
viewDefinition: |-
  select
    a .name,
    d.name,
    c .name,
    c .subname,
    DECODE(
      c .type#,
      19,
      'TABLE PARTITION',
      2,
      'TABLE',
      34,
      'TABLE SUBPARTITION'
    ),
    (
      CASE
        WHEN bitand(a .FLAG, 8) = 8 THEN 'TABLESPACE'
        WHEN (
          b.obj_typ <> b.obj_typ_orig
          AND b.obj_typ_orig = 2
        ) THEN 'TABLE'
        WHEN (
          b.obj_typ <> b.obj_typ_orig
          AND b.obj_typ_orig = 19
        ) THEN 'TABLE PARTITION'
        ELSE 'POLICY NOT INHERITED'
      END
    ),
    (
      CASE
        WHEN (bitand(b.FLAG, 1) = 1) THEN 'NO'
        ELSE 'YES'
      END
    ),
    (
      CASE
        WHEN (bitand(b.FLAG, 64) = 0) THEN 'NO'
        ELSE 'YES'
      END
    )
  from
    sys.ilm$ a,
    sys.ilmobj$ b,
    sys.obj$ c,
    sys.user$ d,
    (
      select
        a .policy#
      from
        sys.ilm$ a
      where
        bitand(a .flag, 8) = 0
        and a .owner# = userenv('SCHEMAID')
      union
      select
        a .policy#
      from
        sys.ilm$ a,
        sys.ts$ b,
        sys.tsq$ c
      where
        bitand(a .flag, 8) = 8
        and a .ts# = b.ts#
        and b.ts# = c .ts#
        and c .user# = userenv('SCHEMAID')
        and (
          c .blocks > 0
          or c .maxblocks != 0
        )
      union
      select
        a .policy#
      from
        sys.ilm$ a
      where
        bitand(a .flag, 8) = 8
        and exists (
          select
            null
          from
            sys.v$enabledprivs
          where
            priv_number = -15
            /* UNLIMITED TABLESPACE */
        )
    ) e
  where
    a .policy# = b.policy#
    AND b.obj# = c .obj#
    AND c .owner# = d.user#
    AND a .policy# = e.policy#
    AND c .name not like 'REDEF$%'
    AND c .name not like 'MLOG$%' minus
  select
    a .name,
    d.name,
    c .name,
    c .subname,
    DECODE(
      c .type#,
      19,
      'TABLE PARTITION',
      2,
      'TABLE',
      34,
      'TABLE SUBPARTITION'
    ),
    (
      CASE
        WHEN bitand(a .FLAG, 8) = 8 THEN 'TABLESPACE'
        WHEN (
          b.obj_typ <> b.obj_typ_orig
          AND b.obj_typ_orig = 2
        ) THEN 'TABLE'
        WHEN (
          b.obj_typ <> b.obj_typ_orig
          AND b.obj_typ_orig = 19
        ) THEN 'TABLE PARTITION'
        ELSE 'POLICY NOT INHERITED'
      END
    ),
    (
      CASE
        WHEN (bitand(b.FLAG, 1) = 1) THEN 'NO'
        ELSE 'YES'
      END
    ),
    (
      CASE
        WHEN (bitand(b.FLAG, 64) = 0) THEN 'NO'
        ELSE 'YES'
      END
    )
  from
    sys.ilm$ a,
    sys.ilmobj$ b,
    sys.obj$ c,
    sys.user$ d,
    (
      select
        a .policy#
      from
        sys.ilm$ a
      where
        bitand(a .flag, 8) = 0
        and a .owner# = userenv('SCHEMAID')
      union
      select
        a .policy#
      from
        sys.ilm$ a,
        sys.ts$ b,
        sys.tsq$ c
      where
        bitand(a .flag, 8) = 8
        and a .ts# = b.ts#
        and b.ts# = c .ts#
        and c .user# = userenv('SCHEMAID')
        and (
          c .blocks > 0
          or c .maxblocks != 0
        )
      union
      select
        a .policy#
      from
        sys.ilm$ a
      where
        bitand(a .flag, 8) = 8
        and exists (
          select
            null
          from
            sys.v$enabledprivs
          where
            priv_number = -15
            /* UNLIMITED TABLESPACE */
        )
    ) e,
    sys.redef_object$ f
  where
    a .policy# = b.policy#
    AND b.obj# = c .obj#
    AND c .owner# = d.user#
    AND a .policy# = e.policy#
    AND f.obj_type = 1
    AND f.int_obj_owner = d.name
    AND f.int_obj_name = c .name

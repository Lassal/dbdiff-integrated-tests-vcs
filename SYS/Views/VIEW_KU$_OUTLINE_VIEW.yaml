schema: SYS
name: KU$_OUTLINE_VIEW
updatedAllowed: true
insertAllowed: true
columns:
- name: CATEGORY
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 128
- name: CREATOR
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 10
  dataTypeLength: 128
- name: FLAGS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: HASH_VALUE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: HINTCOUNT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
- name: HINTS
  dataType: KU$_OUTLINE_HINT_LIST_T
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 128
- name: NODES
  dataType: KU$_OUTLINE_NODE_LIST_T
  nullable: true
  ordinalPosition: 15
  dataTypeLength:
- name: SIGNATURE
  dataType: RAW
  nullable: true
  ordinalPosition: 6
  dataTypeLength:
- name: SQL_TEXT
  dataType: CLOB
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: TEXTLEN
  dataType: NUMBER
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: TIMESTAMP
  dataType: VARCHAR2
  textMaxLength: 19
  nullable: true
  ordinalPosition: 11
  dataTypeLength: 19
- name: VERSION
  dataType: VARCHAR2
  textMaxLength: 64
  nullable: true
  ordinalPosition: 9
  dataTypeLength: 64
- name: VERS_MAJOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 1
- name: VERS_MINOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 1
referencedTables:
- schema: OUTLN
  name: OL$
- schema: OUTLN
  name: OL$HINTS
- schema: OUTLN
  name: OL$NODES
- schema: SYS
  name: SESSION_ROLES
- schema: SYS
  name: USER$
viewDefinition: |-
  select
    '1',
    '0',
    ol.ol_name,
    sys.dbms_metadata_util.long2clob(
      ol.textlen,
      'OUTLN.OL$',
      'SQL_TEXT',
      ol.rowid
    ),
    ol.textlen,
    ol.signature,
    ol.hash_value,
    ol.category,
    ol.version,
    ol.creator,
    to_char(ol.timestamp, 'YYYY/MM/DD HH24:MI:SS'),
    ol.flags,
    ol.hintcount,
    cast(
      multiset(
        select
          ol_name,
          hint#,
          category,
          hint_type,
          hint_text,
          stage#,
          node#,
          table_name,
          table_tin,
          table_pos,
          ref_id,
          user_table_name,
          cost,
          cardinality,
          bytes,
          hint_textoff,
          hint_textlen,
          join_pred
        from
          outln.ol$hints h
        where
          h.ol_name = ol.ol_name
        order by
          h.stage#,
          h.node#
      ) as ku$_outline_hint_list_t
    ),
    cast(
      multiset(
        select
          ol_name,
          category,
          node_id,
          parent_id,
          node_type,
          node_textlen,
          node_textoff
        from
          outln.ol$nodes n
        where
          n.ol_name = ol.ol_name
      ) as ku$_outline_node_list_t
    )
  from
    outln.ol$ ol,
    sys.user$ u
  where
    ol.creator = u.name
    AND (
      SYS_CONTEXT('USERENV', 'CURRENT_USERID') IN (u.user#, 0)
      OR EXISTS (
        SELECT
          *
        FROM
          sys.session_roles
        WHERE
          role = 'SELECT_CATALOG_ROLE'
      )
    )

schema: SYS
name: KU$_TABLESPACE_VIEW
updatedAllowed: true
insertAllowed: true
columns:
- name: AFFSTRENGTH
  dataType: NUMBER
  nullable: true
  ordinalPosition: 21
  dataTypeLength:
- name: BACKUPOWNER
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 29
  dataTypeLength: 30
- name: BITMAPPED
  dataType: NUMBER
  nullable: true
  ordinalPosition: 22
  dataTypeLength:
- name: BLOCKSIZE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: CONTENTS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: DFLEXTPCT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 19
  dataTypeLength:
- name: DFLINCR
  dataType: NUMBER
  nullable: true
  ordinalPosition: 17
  dataTypeLength:
- name: DFLINIT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 16
  dataTypeLength:
- name: DFLMAXEXT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 15
  dataTypeLength:
- name: DFLMINEXT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: DFLMINLEN
  dataType: NUMBER
  nullable: true
  ordinalPosition: 18
  dataTypeLength:
- name: DFLOGGING
  dataType: NUMBER
  nullable: true
  ordinalPosition: 20
  dataTypeLength:
- name: DIRECTALLOWED
  dataType: NUMBER
  nullable: true
  ordinalPosition: 24
  dataTypeLength:
- name: ENCRYPTIONALG
  dataType: VARCHAR2
  textMaxLength: 7
  nullable: true
  ordinalPosition: 36
  dataTypeLength: 7
- name: FILESPEC
  dataType: KU$_FILE_LIST_T
  nullable: true
  ordinalPosition: 35
  dataTypeLength:
- name: FLAGS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 25
  dataTypeLength:
- name: GROUPNAME
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 30
  dataTypeLength: 30
- name: INC_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: NAME
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 30
- name: OWNERINSTANCE
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 28
  dataTypeLength: 30
- name: OWNER_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: PITRSCNBAS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 27
  dataTypeLength:
- name: PITRSCNWRP
  dataType: NUMBER
  nullable: true
  ordinalPosition: 26
  dataTypeLength:
- name: PLUGGED
  dataType: NUMBER
  nullable: true
  ordinalPosition: 23
  dataTypeLength:
- name: SCNBAS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
- name: SCNWRP
  dataType: NUMBER
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: SPARE1
  dataType: NUMBER
  nullable: true
  ordinalPosition: 31
  dataTypeLength:
- name: SPARE2
  dataType: NUMBER
  nullable: true
  ordinalPosition: 32
  dataTypeLength:
- name: SPARE3
  dataType: VARCHAR2
  textMaxLength: 1000
  nullable: true
  ordinalPosition: 33
  dataTypeLength: 1000
- name: SPARE4
  dataType: VARCHAR2
  textMaxLength: 19
  nullable: true
  ordinalPosition: 34
  dataTypeLength: 19
- name: STATUS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 6
  dataTypeLength:
- name: TS_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 3
  dataTypeLength:
- name: UNDOBLOCK_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: UNDOFILE_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 8
  dataTypeLength:
- name: VERS_MAJOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 1
- name: VERS_MINOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 1
referencedTables:
- schema: SYS
  name: KU$_FILE_VIEW
- schema: SYS
  name: SESSION_ROLES
- schema: SYS
  name: TS$
- schema: SYS
  name: V$ENCRYPTED_TABLESPACES
viewDefinition: |-
  select
    '1',
    '0',
    t.ts#,
    t.name,
    t.owner#,
    t.online$,
    t.contents$,
    t.undofile#,
    t.undoblock#,
    t.blocksize,
    t.inc#,
    t.scnwrp,
    t.scnbas,
    t.dflminext,
    t.dflmaxext,
    t.dflinit,
    t.dflincr,
    t.dflminlen,
    t.dflextpct,
    t.dflogging,
    t.affstrength,
    t.bitmapped,
    t.plugged,
    t.directallowed,
    -- Convert 'flags' to a value that the pre-11.2 xsl stylesheet
    -- can process: if archive compressed and version < 11.2,
    -- turn off compression.  The block format for archive compression
    -- is not supported pre-11.2, so the compression bits must be
    -- set to NOCOMPRESS.
    --  #define KTT_COMPRESSED              0x40      (64)
    -- #define KTT_ARCH1_COMPRESSION  ((ub4)0x20000)  (131072)
    -- #define KTT_ARCH2_COMPRESSION  ((ub4)0x40000)  (262144)
    -- #define KTT_ARCH3_COMPRESSION  ((ub4)0x80000)  (524288)
    -- #define KTT_HCC_ROW_LOCKING    ((ub4)0x400000) (4194304)
    case
      when bitand (t.flags, 131072 + 262144 + 524288 + 4194304) = 0 then t.flags
      when dbms_metadata.get_version >= '11.02.00.00.00' then t.flags
      else t.flags - bitand(t.flags, 64 + 131072 + 262144 + 524288 + 4194304)
    end,
    t.pitrscnwrp,
    t.pitrscnbas,
    t.ownerinstance,
    t.backupowner,
    case
      bitand(t.flags, 1024)
      when 1024 then (
        select
          t2.name
        from
          ts$ t2
        where
          t.dflmaxext = t2.ts#
      )
      else NULL
    end,
    t.spare1,
    t.spare2,
    t.spare3,
    to_char(t.spare4, 'YYYY/MM/DD HH24:MI:SS'),
    cast(
      multiset(
        select
          value(f)
        from
          ku$_file_view f
        where
          f.ts_num = t.ts#
      ) as ku$_file_list_t
    ),
    (
      select
        encryptionalg
      from
        v$encrypted_tablespaces et
      where
        et.ts# = t.ts#
    )
  from
    ts$ t
  where
    t.online$ IN (1, 2, 4)
    and bitand(t.flags, 2048) = 0
    and (
      SYS_CONTEXT('USERENV', 'CURRENT_USERID') = 0
      OR EXISTS (
        SELECT
          *
        FROM
          sys.session_roles
        WHERE
          role = 'SELECT_CATALOG_ROLE'
      )
    )

schema: SYS
name: KU$_ALL_INDEX_VIEW
updatedAllowed: true
insertAllowed: true
columns:
- name: ANALYZETIME
  dataType: VARCHAR2
  textMaxLength: 19
  nullable: true
  ordinalPosition: 35
  dataTypeLength: 19
- name: ANC_OBJ
  dataType: KU$_SCHEMAOBJ_T
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
- name: BASE_OBJ
  dataType: KU$_SCHEMAOBJ_T
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: BASE_OBJ_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: BASE_PROPERTY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 52
  dataTypeLength:
- name: BASE_PROPERTY2
  dataType: NUMBER
  nullable: true
  ordinalPosition: 53
  dataTypeLength:
- name: BLEVEL
  dataType: NUMBER
  nullable: true
  ordinalPosition: 29
  dataTypeLength:
- name: BLOCKSIZE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: CLUFAC
  dataType: NUMBER
  nullable: true
  ordinalPosition: 34
  dataTypeLength:
- name: COLS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 21
  dataTypeLength:
- name: COL_LIST
  dataType: KU$_INDEX_COL_LIST_T
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: DATAOBJ_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: DBLKKEY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 33
  dataTypeLength:
- name: DEFERRED_STG
  dataType: KU$_DEFERRED_STG_T
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: DEGREE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 39
  dataTypeLength:
- name: DISTKEY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 31
  dataTypeLength:
- name: FLAGS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 27
  dataTypeLength:
- name: FOR_PKOID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 49
  dataTypeLength:
- name: FOR_REFPAR
  dataType: NUMBER
  nullable: true
  ordinalPosition: 50
  dataTypeLength:
- name: INDMETHOD_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: INDTYPE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 15
  dataTypeLength: 128
- name: INDTYPE_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 16
  dataTypeLength: 128
- name: INITRANS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 23
  dataTypeLength:
- name: INSTANCES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 40
  dataTypeLength:
- name: INTCOLS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 38
  dataTypeLength:
- name: JIJOIN
  dataType: KU$_JIJOIN_LIST_T
  nullable: true
  ordinalPosition: 20
  dataTypeLength:
- name: JIJOIN_TABS
  dataType: KU$_JIJOIN_TABLE_LIST_T
  nullable: true
  ordinalPosition: 19
  dataTypeLength:
- name: LBLKKEY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 32
  dataTypeLength:
- name: LEAFCNT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 30
  dataTypeLength:
- name: MAXTRANS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 24
  dataTypeLength:
- name: NUMCOLSDEP
  dataType: NUMBER
  nullable: true
  ordinalPosition: 42
  dataTypeLength:
- name: NUMKEYCOLS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 43
  dataTypeLength:
- name: OBJ_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 3
  dataTypeLength:
- name: OID_OR_SETID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 51
  dataTypeLength:
- name: PART_OBJ
  dataType: KU$_IND_PARTOBJ_T
  nullable: true
  ordinalPosition: 44
  dataTypeLength:
- name: PCT_FREE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 22
  dataTypeLength:
- name: PCT_THRES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 25
  dataTypeLength:
- name: PLSQL_CODE
  dataType: KU$_DOMIDX_PLSQL_T
  nullable: true
  ordinalPosition: 18
  dataTypeLength:
- name: PROPERTY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 28
  dataTypeLength:
- name: ROWCNT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 37
  dataTypeLength:
- name: SAMPLESIZE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 36
  dataTypeLength:
- name: SCHEMA_OBJ
  dataType: KU$_SCHEMAOBJ_T
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: SECOBJS
  dataType: KU$_DOMIDX_2NDTAB_LIST_T
  nullable: true
  ordinalPosition: 17
  dataTypeLength:
- name: SPARE3
  dataType: NUMBER
  nullable: true
  ordinalPosition: 45
  dataTypeLength:
- name: SPARE4
  dataType: VARCHAR2
  textMaxLength: 1000
  nullable: true
  ordinalPosition: 46
  dataTypeLength: 1000
- name: SPARE5
  dataType: VARCHAR2
  textMaxLength: 1000
  nullable: true
  ordinalPosition: 47
  dataTypeLength: 1000
- name: SPARE6
  dataType: VARCHAR2
  textMaxLength: 19
  nullable: true
  ordinalPosition: 48
  dataTypeLength: 19
- name: STORAGE
  dataType: KU$_STORAGE_T
  nullable: true
  ordinalPosition: 8
  dataTypeLength:
- name: TRUNCCNT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 41
  dataTypeLength:
- name: TS_NAME
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 30
- name: TYPE_NUM
  dataType: NUMBER
  nullable: true
  ordinalPosition: 26
  dataTypeLength:
- name: VERS_MAJOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 1
- name: VERS_MINOR
  dataType: CHAR
  textMaxLength: 1
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 1
referencedTables:
- schema: SYS
  name: CDEF$
- schema: SYS
  name: DUAL
- schema: SYS
  name: IND$
- schema: SYS
  name: KU$_DEFERRED_STG_VIEW
- schema: SYS
  name: KU$_DOMIDX_2NDTAB_VIEW
- schema: SYS
  name: KU$_DOMIDX_PLSQL_VIEW
- schema: SYS
  name: KU$_INDEX_COL_VIEW
- schema: SYS
  name: KU$_IND_PARTOBJ_VIEW
- schema: SYS
  name: KU$_JIJOIN_TABLE_VIEW
- schema: SYS
  name: KU$_JIJOIN_VIEW
- schema: SYS
  name: KU$_SCHEMAOBJ_VIEW
- schema: SYS
  name: KU$_STORAGE_VIEW
- schema: SYS
  name: OBJ$
- schema: SYS
  name: SESSION_ROLES
- schema: SYS
  name: TAB$
- schema: SYS
  name: TS$
- schema: SYS
  name: USER$
viewDefinition: |-
  select
    '1',
    '5',
    i.obj#,
    value(o),
    cast(
      multiset(
        select
          *
        from
          ku$_index_col_view ic
        where
          ic.obj_num = i.obj#
        order by
          ic.pos_num
      ) as ku$_index_col_list_t
    ),
    ts.name,
    ts.blocksize,
    (
      select
        value(s)
      from
        ku$_storage_view s
      where
        i.file# = s.file_num
        and i.block# = s.block_num
        and i.ts# = s.ts_num
    ),
    (
      select
        value(s)
      from
        ku$_deferred_stg_view s
      where
        s.obj_num = i.obj#
    ),
    i.dataobj#,
    i.bo#,
    (
      select
        value(so)
      from
        ku$_schemaobj_view so
      where
        so.obj_num = i.bo#
    ),
    (
      select
        value(ao)
      from
        ku$_schemaobj_view ao
      where
        ao.obj_num = dbms_metadata_util.get_anc(i.bo#, 0)
    ),
    i.indmethod#,
    (
      select
        o2.name
      from
        obj$ o2
      where
        i.indmethod# = o2.obj#
    ),
    (
      select
        u2.name
      from
        user $ u2
      where
        u2.user# = (
          select
            o3.owner#
          from
            obj$ o3
          where
            i.indmethod# = o3.obj#
        )
    ),
    -- include domain index info if type# = 9 (cooperative index method)
    decode(
      i.type#,
      9,
      cast(
        multiset(
          select
            *
          from
            ku$_domidx_2ndtab_view so
          where
            so.obj_num = i.obj#
        ) as ku$_domidx_2ndtab_list_t
      ),
      null
    ),
    decode(
      i.type#,
      9,
      (
        select
          value(pl)
        from
          ku$_domidx_plsql_view pl
        where
          pl.obj_num = i.obj#
      ),
      null
    ),
    -- include bitmap join index info if this is a bji
    decode(
      bitand(i.property, 1024),
      1024,
      cast(
        multiset(
          select
            *
          from
            ku$_jijoin_table_view j
          where
            j.obj_num = i.obj#
        ) as ku$_jijoin_table_list_t
      ),
      null
    ),
    decode(
      bitand(i.property, 1024),
      1024,
      cast(
        multiset(
          select
            *
          from
            ku$_jijoin_view j
          where
            j.obj_num = i.obj#
        ) as ku$_jijoin_list_t
      ),
      null
    ),
    i.cols,
    i.pctfree$,
    i.initrans,
    i.maxtrans,
    i.pctthres$,
    i.type#,
    i.flags,
    i.property,
    i.blevel,
    i.leafcnt,
    i.distkey,
    i.lblkkey,
    i.dblkkey,
    i.clufac,
    to_char(i.analyzetime, 'YYYY/MM/DD HH24:MI:SS'),
    i.samplesize,
    i.rowcnt,
    i.intcols,
    i.degree,
    i.instances,
    i.trunccnt,
    i.spare1,
    i.spare2,
    (
      select
        value(po)
      from
        ku$_ind_partobj_view po
      where
        i.obj# = po.obj_num
    ),
    i.spare3,
    replace(i.spare4, chr(0)),
    i.spare5,
    to_char(i.spare6, 'YYYY/MM/DD HH24:MI:SS'),
    nvl(
      (
        select
          1
        from
          cdef$ c
        where
          c .enabled = i.obj#
          and c .type# = 2
          and (
            select
              1
            from
              tab$ t
            where
              t.obj# = c .obj#
              and bitand(t.property, 4096) = 4096
          ) = 1
      ),
      0
    ),
    -- and index is used for reference partitioning if it is used
    --  for a primary or unique key constraint and 0x400 is set in
    --  defer (ref par parent).
    nvl(
      (
        select
          1
        from
          dual
        where
          (
            exists (
              select
                1
              from
                cdef$ c
              where
                c .enabled = i.obj#
                and c .type# in(2, 3)
                and (bitand(c .defer, 1024) != 0)
            )
          )
      ),
      0
    ),
    nvl(
      (
        select
          ic.oid_or_setid
        from
          ku$_index_col_view ic
        where
          i.type# = 1
          and i.intcols = 1
          and ic.obj_num = i.obj#
      ),
      0
    ),
    nvl(
      (
        select
          bitand(t.property, 4294967295)
        from
          tab$ t
        where
          t.obj# = i.bo#
      ),
      0
    ),
    nvl(
      (
        select
          trunc(t.property / power(2, 32))
        from
          tab$ t
        where
          t.obj# = i.bo#
      ),
      0
    )
  from
    ku$_schemaobj_view o,
    ind$ i,
    ts$ ts
  where
    o.obj_num = i.obj#
    AND i.ts# = ts.ts#
    AND (
      SYS_CONTEXT('USERENV', 'CURRENT_USERID') IN (o.owner_num, 0)
      OR EXISTS (
        SELECT
          *
        FROM
          sys.session_roles
        WHERE
          role = 'SELECT_CATALOG_ROLE'
      )
    )

schema: SYS
name: _ALL_QUEUE_CACHED_MESSAGES
updatedAllowed: true
insertAllowed: true
columns:
- name: MSGID
  dataType: RAW
  nullable: true
  ordinalPosition: 3
  dataTypeLength:
- name: QUEUE_ID
  dataType: NUMBER
  nullable: false
  ordinalPosition: 2
  dataTypeLength:
- name: QUEUE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 128
- name: SUBSCRIBER_BITMAP
  dataType: RAW
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
referencedTables:
- schema: SYS
  name: GV$AQ_MSGBM
- schema: SYS
  name: OBJ$
- schema: SYS
  name: OBJAUTH$
- schema: SYS
  name: USER$
- schema: SYS
  name: V$ENABLEDPRIVS
- schema: SYS
  name: X$KZSRO
- schema: SYSTEM
  name: AQ$_QUEUES
- schema: SYSTEM
  name: AQ$_QUEUE_TABLES
viewDefinition: |-
  select
    q.name QUEUE_NAME,
    q.eventid QUEUE_ID,
    gv.msgid,
    gv.bitmap SUBSCRIBER_BITMAP
  FROM
    system.aq$_queues q,
    system.aq$_queue_tables t,
    sys.user$ cu,
    gv$aq_msgbm gv,
    sys.obj$ o
  where
    q.table_objno = t.objno
    and q.usage != 1
    and q.eventid = gv.queue_id
    and q.eventid = o.obj#
    and o.owner# = cu.user#
    and (
      t.schema = sys_context('USERENV', 'CURRENT_USER')
      or o.obj# in (
        select
          oa.obj#
        from
          sys.objauth$ oa
        where
          oa.privilege# = 21
          and grantee# in (
            select
              kzsrorol
            from
              x$kzsro
          )
      )
      or exists (
        select
          null
        from
          v$enabledprivs
        where
          priv_number = -220
      )
    )

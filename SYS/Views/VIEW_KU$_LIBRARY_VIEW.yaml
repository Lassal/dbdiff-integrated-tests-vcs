schema: SYS
name: KU$_LIBRARY_VIEW
updatedAllowed: true
insertAllowed: true
columns: []
referencedTables: []
viewDefinition: |-
  select
    '1',
    '0',
    lb.obj#,
    value(o),
    lb.filespec,
    replace(lb.audit$, chr(0), '-'),
    lb.property,
    lb.agent,
    (
      select
        do .name
      from
        sys.obj$ do
      where
        do .obj# = (
          select
            d.p_obj#
          from
            sys.dependency$ d
          where
            d.d_obj# = lb.obj#
            and do .obj# = d.p_obj#
            and do .type# = 23
        )
    ),
    lb.leaf_filename,
    (
      select
        value(c)
      from
        sys.ku$_credential_view c
      where
        c .schema_obj.obj_num = (
          select
            d.p_obj#
          from
            sys.dependency$ d,
            obj$ oo
          where
            d.d_obj# = lb.obj#
            and oo.obj# = d.p_obj#
            and oo.type# = 90
        )
    )
  from
    sys.ku$_edition_schemaobj_view o,
    sys.library$ lb
  where
    o.type_num = 22
    AND lb.obj# = o.obj_num
    AND (
      SYS_CONTEXT('USERENV', 'CURRENT_USERID') IN (o.owner_num, 0)
      OR EXISTS (
        SELECT
          *
        FROM
          sys.session_roles
        WHERE
          role = 'SELECT_CATALOG_ROLE'
      )
    )

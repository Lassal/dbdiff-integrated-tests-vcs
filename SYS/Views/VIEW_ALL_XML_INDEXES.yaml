schema: SYS
name: ALL_XML_INDEXES
updatedAllowed: true
insertAllowed: true
columns:
- name: ASYNC
  dataType: VARCHAR2
  textMaxLength: 9
  nullable: true
  ordinalPosition: 9
  dataTypeLength: 9
- name: EX_OR_INCLUDE
  dataType: VARCHAR2
  textMaxLength: 8
  nullable: true
  ordinalPosition: 12
  dataTypeLength: 8
- name: INDEX_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 128
- name: INDEX_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 128
- name: INDEX_TYPE
  dataType: VARCHAR2
  textMaxLength: 27
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 27
- name: PARAMETERS
  dataType: XMLTYPE
  nullable: true
  ordinalPosition: 8
  dataTypeLength:
- name: PATH_TABLE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 128
- name: PEND_TABLE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 11
  dataTypeLength: 128
- name: STALE
  dataType: VARCHAR2
  textMaxLength: 5
  nullable: true
  ordinalPosition: 10
  dataTypeLength: 5
- name: TABLE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 4
  dataTypeLength: 128
- name: TABLE_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 3
  dataTypeLength: 128
- name: TYPE
  dataType: VARCHAR2
  textMaxLength: 10
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 10
referencedTables:
- schema: SYS
  name: IND$
- schema: SYS
  name: OBJ$
- schema: SYS
  name: OBJAUTH$
- schema: SYS
  name: USER$
- schema: SYS
  name: V$ENABLEDPRIVS
- schema: SYS
  name: X$KZSRO
- schema: XDB
  name: XDB$DXPTAB
- schema: XDB
  name: XDB$XTAB
viewDefinition: |-
  select
    u.name INDEX_OWNER,
    oi.name INDEX_NAME,
    bu.name TABLE_OWNER,
    bo.name TABLE_NAME,
    case
      when bitand(p.flags, 536870912) = 536870912 then 'REPOSITORY'
      when bitand(p.flags, 4096) = 4096 then 'BINARY'
      when bitand(p.flags, 8192) = 8192 then 'CLOB in OR'
      when bitand(p.flags, 16384) = 16384 then 'CLOB'
      else 'OR'
    end TYPE,
    case
      when bitand(p.flags, 268435456) != 268435456 then 'STRUCTURED'
      when bitand(p.flags, 268435456) = 268435456
      and exists (
        select
          xt.idxobj#
        from
          xdb.xdb$xtab xt
        where
          xt.idxobj# = p.idxobj#
      ) then 'STRUCTURED and UNSTRUCTURED'
      else 'UNSTRUCTURED'
    end INDEX_TYPE,
    case
      when bitand(p.flags, 268435456) != 268435456 then ''
      else ot.name
    end PATH_TABLE_NAME,
    p.parameters PARAMETERS,
    case
      when bitand(p.flags, 65011712) = 6291456 then 'ON-COMMIT'
      when bitand(p.flags, 65011712) = 10485760 then 'MANUAL'
      when bitand(p.flags, 65011712) = 18874368 then 'EVERY'
      else 'ALWAYS'
    end ASYNC,
    case
      when bitand(p.flags, 2097152) = 2097152 then 'TRUE'
      else 'FALSE'
    end STALE,
    case
      when bitand(p.flags, 2097152) = 2097152 then (
        select
          op.name
        from
          sys.obj$ op
        where
          op.obj# = p.pendtabobj#
      )
      else ''
    end PEND_TABLE_NAME,
    case
      when bitand(p.flags, 32) = 32 then 'INCLUDE'
      when bitand(p.flags, 128) = 128 then 'EXCLUDE'
      else 'FULLY IX'
    end EX_or_INCLUDE
  from
    xdb.xdb$dxptab p,
    sys.obj$ ot,
    sys.obj$ oi,
    sys.user$ u,
    sys.user$ bu,
    sys.obj$ bo,
    sys.ind$ i
  where
    oi.owner# = u.user#
    and oi.obj# = p.idxobj#
    and p.pathtabobj# = ot.obj#
    and i.obj# = oi.obj#
    and i.bo# = bo.obj#
    and bo.owner# = bu.user#
    and (
      u.user# = userenv('SCHEMAID')
      or oi.obj# in (
        select
          oa.obj#
        from
          sys.objauth$ oa
        where
          grantee# in (
            select
              kzsrorol
            from
              x$kzsro
          )
      )
      or
      /* user has system privileges */
      exists (
        select
          null
        from
          v$enabledprivs
        where
          priv_number in (
            -45
            /* LOCK ANY TABLE */,
            -47
            /* SELECT ANY TABLE */,
            -397
            /* READ ANY TABLE */,
            -48
            /* INSERT ANY TABLE */,
            -49
            /* UPDATE ANY TABLE */,
            -50
            /* DELETE ANY TABLE */
          )
      )
    )

schema: SYS
name: USER_ADVISOR_SQLSTATS
updatedAllowed: true
insertAllowed: true
columns:
- name: ATTR1
  dataType: NUMBER
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: BUFFER_GETS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: CON_DBID
  dataType: NUMBER
  nullable: false
  ordinalPosition: 30
  dataTypeLength:
- name: CPU_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: DIRECT_WRITES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 16
  dataTypeLength:
- name: DISK_READS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 15
  dataTypeLength:
- name: ELAPSED_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: END_OF_FETCH_COUNT
  dataType: NUMBER
  nullable: true
  ordinalPosition: 24
  dataTypeLength:
- name: EXECUTIONS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 23
  dataTypeLength:
- name: EXECUTION_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 3
  dataTypeLength: 128
- name: EXECUTION_TYPE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 128
- name: FETCHES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 22
  dataTypeLength:
- name: IO_INTERCONNECT_BYTES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 28
  dataTypeLength:
- name: OBJECT_ID
  dataType: NUMBER
  numericPrecision: 38
  numericScale: 0
  nullable: false
  ordinalPosition: 5
  dataTypeLength: 38,0
- name: OPTIMIZER_COST
  dataType: NUMBER
  nullable: true
  ordinalPosition: 25
  dataTypeLength:
- name: OTHER
  dataType: CLOB
  nullable: true
  ordinalPosition: 26
  dataTypeLength:
- name: PARSE_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: PHYSICAL_READ_BYTES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 19
  dataTypeLength:
- name: PHYSICAL_READ_REQUESTS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 17
  dataTypeLength:
- name: PHYSICAL_WRITE_BYTES
  dataType: NUMBER
  nullable: true
  ordinalPosition: 20
  dataTypeLength:
- name: PHYSICAL_WRITE_REQUESTS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 18
  dataTypeLength:
- name: PLAN_HASH_VALUE
  dataType: NUMBER
  nullable: false
  ordinalPosition: 8
  dataTypeLength:
- name: PLAN_ID
  dataType: NUMBER
  nullable: false
  ordinalPosition: 6
  dataTypeLength:
- name: ROWS_PROCESSED
  dataType: NUMBER
  nullable: true
  ordinalPosition: 21
  dataTypeLength:
- name: SQL_ID
  dataType: VARCHAR2
  textMaxLength: 13
  nullable: false
  ordinalPosition: 7
  dataTypeLength: 13
- name: TASK_ID
  dataType: NUMBER
  numericPrecision: 38
  numericScale: 0
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 38,0
- name: TASK_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: TESTEXEC_FIRST_EXEC_IGNORED
  dataType: VARCHAR2
  textMaxLength: 1
  nullable: true
  ordinalPosition: 29
  dataTypeLength: 1
- name: TESTEXEC_TOTAL_EXECS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 27
  dataTypeLength:
- name: USER_IO_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
referencedTables:
- schema: SYS
  name: WRI$_ADV_EXECUTIONS
- schema: SYS
  name: WRI$_ADV_SQLT_PLAN_HASH
- schema: SYS
  name: WRI$_ADV_SQLT_PLAN_STATS
- schema: SYS
  name: WRI$_ADV_TASKS
viewDefinition: |-
  SELECT
    t.name task_name,
    p.TASK_ID,
    exec_name EXECUTION_NAME,
    exec_type EXECUTION_TYPE,
    OBJECT_ID,
    p.plan_id,
    p.sql_id,
    p.PLAN_HASH as plan_hash_value,
    p.spare_n1 as attr1,
    -- the time stats in the old version are in milliseconds. In the
    -- new code, we used a bit in "flags" to indicate that if the
    -- time stats are in microseconds in the new code. So if
    -- the flags are not set or NULL, we will need to convert them
    -- into microseconds.
    decode(
      bitand(nvl(s.flags, 0), 2),
      2,
      parse_time,
      parse_time * 1000
    ) as PARSE_TIME,
    decode(
      bitand(nvl(s.flags, 0), 2),
      2,
      exec_time,
      exec_time * 1000
    ) as ELAPSED_TIME,
    decode(
      bitand(nvl(s.flags, 0), 2),
      2,
      cpu_time,
      cpu_time * 1000
    ) as CPU_TIME,
    decode(
      bitand(nvl(s.flags, 0), 2),
      2,
      user_io_time,
      user_io_time * 1000
    ) as USER_IO_TIME,
    BUFFER_GETS,
    DISK_READS,
    DIRECT_WRITES,
    s.spare_n1 PHYSICAL_READ_REQUESTS,
    s.spare_n2 PHYSICAL_WRITE_REQUESTS,
    s.spare_n3 PHYSICAL_READ_BYTES,
    s.spare_n4 PHYSICAL_WRITE_BYTES,
    ROWS_PROCESSED,
    FETCHES,
    EXECUTIONS,
    END_OF_FETCH_COUNT,
    OPTIMIZER_COST,
    OTHER,
    TESTEXEC_TOTAL_EXECS,
    io_interconnect_bytes,
    decode(bitand(s.flags, 1), 1, 'Y', 'N') as TESTEXEC_FIRST_EXEC_IGNORED,
    p.con_dbid
  FROM
    wri$_adv_sqlt_plan_hash p,
    wri$_adv_sqlt_plan_stats s,
    wri$_adv_executions e,
    wri$_adv_tasks t
  WHERE
    p.plan_id = s.plan_id
    AND p.exec_name = e.name
    AND p.task_id = e.task_id
    AND p.task_id = t.id
    AND t.owner# = SYS_CONTEXT('USERENV', 'CURRENT_USERID')
    AND (
      p.attribute < power (2, 16)
      OR p.attribute >= 3 * power (2, 16)
    )
    /* hide special plans */

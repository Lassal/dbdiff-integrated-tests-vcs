schema: SYS
name: ALL_TRANSFORMATIONS
updatedAllowed: true
insertAllowed: true
columns:
- name: FROM_TYPE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 128
- name: NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 3
  dataTypeLength: 128
- name: OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 128
- name: TO_TYPE
  dataType: VARCHAR2
  textMaxLength: 256
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 256
- name: TRANSFORMATION_ID
  dataType: NUMBER
  nullable: false
  ordinalPosition: 1
  dataTypeLength:
referencedTables:
- schema: SYS
  name: OBJ$
- schema: SYS
  name: OBJAUTH$
- schema: SYS
  name: TRANSFORMATIONS$
- schema: SYS
  name: USER$
- schema: SYS
  name: V$ENABLEDPRIVS
- schema: SYS
  name: X$KZSRO
viewDefinition: |-
  select
    t.transformation_id,
    t.owner,
    t.name,
    t.from_type,
    t.to_type
  from
    transformations$ t,
    sys.user$ u
  where
    u.user# = USERENV('SCHEMAID')
    and (
      u.name = t.owner
      /* user is the owner */
      or (
        exists (
          select
            null
          from
            v$enabledprivs
            /* user has system privelege */
          where
            priv_number in (
              -184
              /* EXECUTE ANY TYPE */
            )
        )
      )
      or (
        t.from_type in
        /* user has execute on from type */
        (
          select
            t.from_type
          from
            transformations$ t,
            obj$ o,
            objauth$ oa
          where
            o.obj# = oa.obj#
            and t.from_type = o.name
            and (
              oa.grantor# = userenv('SCHEMAID')
              OR oa.obj# in (
                select
                  ro.obj#
                from
                  sys.objauth$ ro
                where
                  grantee# in (
                    select
                      kzsrorol
                    from
                      x$kzsro
                  )
              )
            )
            and t.to_type in
            /* user has execute on to type */
            (
              select
                t.to_type
              from
                transformations$ t,
                obj$ o,
                objauth$ oa
              where
                o.obj# = oa.obj#
                and t.to_type = o.name
                and (
                  oa.grantor# = userenv('SCHEMAID')
                  OR oa.obj# in (
                    select
                      ro.obj#
                    from
                      sys.objauth$ ro
                    where
                      grantee# in (
                        select
                          kzsrorol
                        from
                          x$kzsro
                      )
                  )
                )
            )
        )
      )
    )

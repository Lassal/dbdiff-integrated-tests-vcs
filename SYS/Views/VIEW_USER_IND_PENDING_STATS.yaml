schema: SYS
name: USER_IND_PENDING_STATS
updatedAllowed: true
insertAllowed: true
columns:
- name: AVG_DATA_BLOCKS_PER_KEY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: AVG_LEAF_BLOCKS_PER_KEY
  dataType: NUMBER
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: BLEVEL
  dataType: NUMBER
  nullable: true
  ordinalPosition: 6
  dataTypeLength:
- name: CLUSTERING_FACTOR
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: DISTINCT_KEYS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 8
  dataTypeLength:
- name: INDEX_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 1
  dataTypeLength: 128
- name: LAST_ANALYZED
  dataType: DATE
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: LEAF_BLOCKS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: NUM_ROWS
  dataType: NUMBER
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: PARTITION_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 128
- name: SAMPLE_SIZE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
- name: SUBPARTITION_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 128
- name: TABLE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 128
- name: TABLE_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 128
referencedTables:
- schema: SYS
  name: IND$
- schema: SYS
  name: INDCOMPART$
- schema: SYS
  name: INDPART$
- schema: SYS
  name: INDSUBPART$
- schema: SYS
  name: OBJ$
- schema: SYS
  name: USER$
- schema: SYS
  name: WRI$_OPTSTAT_IND_HISTORY
viewDefinition: |-
  select
    o.name,
    ut.name,
    ot.name,
    o.subname,
    null,
    h.blevel,
    h.leafcnt,
    h.distkey,
    h.lblkkey,
    h.dblkkey,
    h.clufac,
    h.rowcnt,
    h.samplesize,
    h.analyzetime
  from
    sys.obj$ o,
    sys.ind$ i,
    sys.user$ ut,
    sys.obj$ ot,
    sys.wri$_optstat_ind_history h
  where
    o.obj# = i.obj# -- obj(i)  X ind
    and h.obj# = i.obj# -- stat    X ind
    and i.bo# = ot.obj# -- ind     X obj(t)
    and ut.user# = ot.owner# -- user(t) X obj(t)
    and o.namespace = 4
    and o.remoteowner IS NULL
    and o.linkname IS NULL
    and i.type# in (1, 2, 3, 4, 6, 7, 8)
    and bitand(i.flags, 4096) = 0 -- not a fake index
    and h.savtime > systimestamp
    and o.owner# = userenv('SCHEMAID')
  union all
    -- partitions
  select
    o.name,
    ut.name,
    ot.name,
    o.subname,
    null,
    h.blevel,
    h.leafcnt,
    h.distkey,
    h.lblkkey,
    h.dblkkey,
    h.clufac,
    h.rowcnt,
    h.samplesize,
    h.analyzetime
  from
    sys.obj$ o,
    sys.ind$ i,
    indpart$ ip,
    sys.user$ ut,
    sys.obj$ ot,
    sys.wri$_optstat_ind_history h
  where
    ip.bo# = i.obj#
    and h.obj# = ip.obj#
    and i.bo# = ot.obj#
    and o.obj# = ip.obj#
    and ut.user# = ot.owner#
    and o.namespace = 4
    and o.remoteowner IS NULL
    and o.linkname IS NULL
    and i.type# in (1, 2, 3, 4, 6, 7, 8)
    and bitand(i.flags, 4096) = 0 -- not a fake index
    and h.savtime > systimestamp
    and o.owner# = userenv('SCHEMAID')
  union all
  select
    o.name,
    ut.name,
    ot.name,
    o.subname,
    null,
    h.blevel,
    h.leafcnt,
    h.distkey,
    h.lblkkey,
    h.dblkkey,
    h.clufac,
    h.rowcnt,
    h.samplesize,
    h.analyzetime
  from
    sys.obj$ o,
    sys.ind$ i,
    indcompart$ ip,
    sys.user$ ut,
    sys.obj$ ot,
    sys.wri$_optstat_ind_history h
  where
    ip.bo# = i.obj#
    and h.obj# = ip.obj#
    and i.bo# = ot.obj#
    and o.obj# = ip.obj#
    and ut.user# = ot.owner#
    and o.namespace = 4
    and o.remoteowner IS NULL
    and o.linkname IS NULL
    and i.type# in (1, 2, 3, 4, 6, 7, 8)
    and bitand(i.flags, 4096) = 0 -- not a fake index
    and h.savtime > systimestamp
    and o.owner# = userenv('SCHEMAID')
  union all
    -- sub partitions
  select
    oi.name,
    ut.name,
    ot.name,
    os.name,
    os.subname,
    h.blevel,
    h.leafcnt,
    h.distkey,
    h.lblkkey,
    h.dblkkey,
    h.clufac,
    h.rowcnt,
    h.samplesize,
    h.analyzetime
  from
    sys.obj$ os,
    sys.indsubpart$ isp,
    sys.indcompart$ icp,
    sys.user$ ut,
    sys.obj$ ot,
    sys.obj$ oi,
    sys.ind$ i,
    sys.wri$_optstat_ind_history h
  where
    os.obj# = isp.obj#
    and h.obj# = isp.obj#
    and isp.pobj# = icp.obj#
    and icp.bo# = i.obj#
    and oi.obj# = i.obj#
    and i.bo# = ot.obj#
    and ut.user# = ot.owner#
    and oi.type# = 1
    and os.type# = 35
    and ot.type# = 2
    and os.namespace = 4
    and os.remoteowner IS NULL
    and os.linkname IS NULL
    and i.type# in (1, 2, 3, 4, 6, 7, 8)
    and bitand(i.flags, 4096) = 0 -- not a fake index
    and h.savtime > systimestamp
    and ot.owner# = userenv('SCHEMAID')

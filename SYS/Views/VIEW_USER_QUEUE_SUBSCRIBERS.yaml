schema: SYS
name: USER_QUEUE_SUBSCRIBERS
updatedAllowed: true
insertAllowed: true
columns:
- name: ADDRESS
  dataType: VARCHAR2
  textMaxLength: 1024
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 1024
- name: CONSUMER_NAME
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 30
- name: DELIVERY_MODE
  dataType: VARCHAR2
  textMaxLength: 22
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 22
- name: NONDURABLE
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 9
  dataTypeLength: 3
- name: POS_BITMAP
  dataType: NUMBER
  nullable: true
  ordinalPosition: 12
  dataTypeLength:
- name: PROTOCOL
  dataType: NUMBER
  nullable: true
  ordinalPosition: 5
  dataTypeLength:
- name: QUEUE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 128
- name: QUEUE_TABLE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 128
- name: QUEUE_TO_QUEUE
  dataType: VARCHAR2
  textMaxLength: 5
  nullable: true
  ordinalPosition: 10
  dataTypeLength: 5
- name: RULE
  dataType: CLOB
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: SUBSCRIBER_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: TRANSFORMATION
  dataType: VARCHAR2
  textMaxLength: 61
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 61
referencedTables:
- schema: SYS
  name: USER$
- schema: SYS
  name: USER_RULES
- schema: SYSTEM
  name: AQ$_QUEUES
- schema: SYSTEM
  name: AQ$_QUEUE_TABLES
viewDefinition: |-
  select
    q.name QUEUE_NAME,
    t.name QUEUE_TABLE,
    s.name CONSUMER_NAME,
    s.address ADDRESS,
    s.protocol PROTOCOL,
    s.trans_name TRANSFORMATION,
    r.rule_condition RULE,
    decode(
      bitand(s.sub_type, 192),
      64,
      'PERSISTENT',
      128,
      'BUFFERED',
      192,
      'PERSISTENT_OR_BUFFERED',
      'NONE'
    ) DELIVERY_MODE,
    decode(bitand(s.sub_type, 32960), 32960, 'YES', 'NO') NONDURABLE,
    decode(bitand(s.sub_type, 512), 512, 'TRUE', 'FALSE') QUEUE_TO_QUEUE,
    s.subscriber_id SUBSCRIBER_ID,
    s.pos_bitmap POS_BITMAP
  FROM
    system.aq$_queues q,
    system.aq$_queue_tables t,
    sys.user$ cu,
    sys.user_rules r,
    TABLE(
      aq$_get_subscribers(
        cu.name,
        q.name,
        t.name,
        cu.name,
        q.eventid,
        t.flags
      )
    ) s
  where
    cu.user# = userenv('SCHEMAID')
    and cu.name = t.schema
    and q.table_objno = t.objno
    and bitand(t.flags, 1) = 1
    and q.usage != 1
    and s.rule_name = r.rule_name(+)

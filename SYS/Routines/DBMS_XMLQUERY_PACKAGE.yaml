schema: SYS
name: DBMS_XMLQUERY
routineType: PACKAGE
returnParamater:
  name: NEWCONTEXT(2).(--return--)
  ordinalPosition: 0
  dataType: NUMBER
  parameterMode: OUT
parameters:
- name: CLEARBINDVALUES.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: CLOSECONTEXT.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETDTD(1).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETDTD(1).WITHVER
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: GETDTD(2).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETDTD(2).XDOC
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: GETDTD(2).WITHVER
  ordinalPosition: 3
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: GETEXCEPTIONCONTENT.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETEXCEPTIONCONTENT.ERRNO
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: OUT
- name: GETEXCEPTIONCONTENT.ERRMSG
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: OUT
- name: GETNUMROWSPROCESSED.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(1).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(1).METATYPE
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(2).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(2).XDOC
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: GETXML(2).METATYPE
  ordinalPosition: 3
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(3).SQLQUERY
  ordinalPosition: 1
  dataType: VARCHAR2
  parameterMode: IN
- name: GETXML(3).METATYPE
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: GETXML(4).SQLQUERY
  ordinalPosition: 1
  dataType: CLOB
  parameterMode: IN
- name: GETXML(4).METATYPE
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: NEWCONTEXT(1).SQLQUERY
  ordinalPosition: 1
  dataType: VARCHAR2
  parameterMode: IN
- name: NEWCONTEXT(2).SQLQUERY
  ordinalPosition: 1
  dataType: CLOB
  parameterMode: IN
- name: P_GETDTD.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_GETDTD.XDOC
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: P_GETDTD.WITHVER
  ordinalPosition: 3
  dataType: NUMBER
  parameterMode: IN
- name: P_GETXML.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_GETXML.XDOC
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: P_GETXML.METATYPE
  ordinalPosition: 3
  dataType: NUMBER
  parameterMode: IN
- name: P_PROPORIGEXC.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_PROPORIGEXC.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: PROPAGATEORIGINALEXCEPTION.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: PROPAGATEORIGINALEXCEPTION.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: P_SETDATAHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETDATAHEADER.HEADER
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: P_SETDATAHEADER.TAG
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETENCODINGTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETENCODINGTAG.ENC
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETMETAHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETMETAHEADER.HEADER
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: P_SETRAISEEXCEPTION.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETRAISEEXCEPTION.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: P_SETRAISENOROWSEXC.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETRAISENOROWSEXC.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSQLTOXMLNAMEESC.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSQLTOXMLNAMEESC.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSTRICTLEGALXMLCHARCHECK.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSTRICTLEGALXMLCHARCHECK.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSTYLESHEETHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETSTYLESHEETHEADER.URI
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETSTYLESHEETHEADER.TYPE
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETXSLT(1).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETXSLT(1).URI
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETXSLT(1).REF
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: P_SETXSLT(2).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_SETXSLT(2).STYLESHEET
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: P_SETXSLT(2).REF
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: P_USENULLATTRIND.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_USENULLATTRIND.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: P_USETYPEFORCOLLELEMTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: P_USETYPEFORCOLLELEMTAG.FLAG
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: REMOVEXSLTPARAM.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: REMOVEXSLTPARAM.NAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: RESETRESULTSET.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETBINDVALUE.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETBINDVALUE.BINDNAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETBINDVALUE.BINDVALUE
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: SETCOLLIDATTRNAME.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETCOLLIDATTRNAME.ATTRNAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETDATAHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETDATAHEADER.HEADER
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: SETDATAHEADER.TAG
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: SETDATEFORMAT.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETDATEFORMAT.MASK
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETENCODINGTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETENCODINGTAG.ENC
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETERRORTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETERRORTAG.TAG
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETMAXROWS.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETMAXROWS.ROWS
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: SETMETAHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETMETAHEADER.HEADER
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: SETRAISEEXCEPTION.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETRAISEEXCEPTION.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: SETRAISENOROWSEXCEPTION.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETRAISENOROWSEXCEPTION.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: SETROWIDATTRNAME.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETROWIDATTRNAME.ATTRNAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETROWIDATTRVALUE.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETROWIDATTRVALUE.COLNAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETROWSETTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETROWSETTAG.TAG
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETROWTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETROWTAG.TAG
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETSKIPROWS.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETSKIPROWS.ROWS
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: SETSQLTOXMLNAMEESCAPING.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETSQLTOXMLNAMEESCAPING.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: SETSTRICTLEGALXMLCHARCHECK.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETSTRICTLEGALXMLCHARCHECK.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: SETSTYLESHEETHEADER.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETSTYLESHEETHEADER.URI
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETSTYLESHEETHEADER.TYPE
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: SETTAGCASE.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETTAGCASE.TCASE
  ordinalPosition: 2
  dataType: NUMBER
  parameterMode: IN
- name: SETXSLT(1).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETXSLT(1).URI
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETXSLT(1).REF
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: SETXSLT(2).CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETXSLT(2).STYLESHEET
  ordinalPosition: 2
  dataType: CLOB
  parameterMode: IN
- name: SETXSLT(2).REF
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: SETXSLTPARAM.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: SETXSLTPARAM.NAME
  ordinalPosition: 2
  dataType: VARCHAR2
  parameterMode: IN
- name: SETXSLTPARAM.VALUE
  ordinalPosition: 3
  dataType: VARCHAR2
  parameterMode: IN
- name: USENULLATTRIBUTEINDICATOR.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: USENULLATTRIBUTEINDICATOR.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
- name: USETYPEFORCOLLELEMTAG.CTXHDL
  ordinalPosition: 1
  dataType: NUMBER
  parameterMode: IN
- name: USETYPEFORCOLLELEMTAG.FLAG
  ordinalPosition: 2
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
routineDefinition: |-
  PACKAGE DBMS_XMLQUERY AUTHID CURRENT_USER AS -- types
  SUBTYPE ctxType IS NUMBER;
  /* context type */
  SUBTYPE ctxHandle IS NUMBER;
  DEFAULT_ROWSETTAG CONSTANT VARCHAR2(6): = 'ROWSET';
  /* rowsettag */
  DEFAULT_ERRORTAG CONSTANT VARCHAR2(5): = 'ERROR';
  /* error tag */
  DEFAULT_ROWIDATTR CONSTANT VARCHAR2(3): = 'NUM';
  /* Row ID attr */
  DEFAULT_ROWTAG CONSTANT VARCHAR2(3): = 'ROW';
  /* rowtag */
  DEFAULT_DATE_FORMAT CONSTANT VARCHAR2(21): = 'MM/dd/yyyy HH:mm:ss';
  ALL_ROWS CONSTANT NUMBER: = -1;
  /* NO MAX, render all */
  NONE CONSTANT NUMBER: = 0;
  /* NO META */
  DTD CONSTANT NUMBER: = 1;
  /* META = DTD */
  SCHEMA CONSTANT NUMBER: = 2;
  /* META = SCHEMA */
  LOWER_CASE CONSTANT NUMBER: = 1;
  /* LOWER case */
  UPPER_CASE CONSTANT NUMBER: = 2;
  /* UPPER case */
  -- used to signal that the DB encoding is to be used
  DB_ENCODING CONSTANT VARCHAR2(1): = '_';
  ----------------------------- misc functions ------------------------------
  PROCEDURE getVersion;
  -------------------- constructor/destructor functions ---------------------
  FUNCTION newContext(sqlQuery IN VARCHAR2) RETURN ctxType;
  FUNCTION newContext(sqlQuery IN CLOB) RETURN ctxType;
  PROCEDURE closeContext(ctxHdl IN ctxType);
  -------------------- parameters to the XML generation engine ----------------
  PROCEDURE setRowsetTag(ctxHdl IN ctxType, tag IN VARCHAR2);
  PROCEDURE setRowTag(ctxHdl IN ctxType, tag IN VARCHAR2);
  PROCEDURE setErrorTag(ctxHdl IN ctxType, tag IN VARCHAR2);
  PROCEDURE setRowIdAttrName(ctxHdl IN ctxType, attrName IN VARCHAR2);
  PROCEDURE setRowIdAttrValue(ctxHdl IN ctxType, colName IN VARCHAR2);
  PROCEDURE setCollIdAttrName(ctxHdl IN ctxType, attrName IN VARCHAR2);
  PROCEDURE useTypeForCollElemTag(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE useNullAttributeIndicator(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE setSQLToXMLNameEscaping(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE setTagCase(ctxHdl IN ctxType, tCase IN NUMBER);
  PROCEDURE setDateFormat(ctxHdl IN ctxType, mask IN VARCHAR2);
  PROCEDURE setMaxRows (ctxHdl IN ctxType, rows IN NUMBER);
  PROCEDURE setSkipRows(ctxHdl IN ctxType, rows IN NUMBER);
  PROCEDURE setStylesheetHeader(
    ctxHdl IN ctxType,
    uri IN VARCHAR2,
    type IN VARCHAR2: = 'text/xsl'
  );
  PROCEDURE setXSLT(
    ctxHdl IN ctxType,
    uri IN VARCHAR2,
    ref IN VARCHAR2: = null
  );
  PROCEDURE setXSLT(
    ctxHdl IN ctxType,
    stylesheet IN CLOB,
    ref IN VARCHAR2: = null
  );
  PROCEDURE setXSLTParam(
    ctxHdl IN ctxType,
    name IN VARCHAR2,
    value IN VARCHAR2
  );
  PROCEDURE removeXSLTParam(ctxHdl IN ctxType, name IN VARCHAR2);
  PROCEDURE setStrictLegalXMLCharCheck(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE setEncodingTag(
    ctxHdl IN ctxType,
    enc IN VARCHAR2: = DB_ENCODING
  );
  PROCEDURE setBindValue(
    ctxHdl IN ctxType,
    bindName IN VARCHAR2,
    bindValue IN VARCHAR2
  );
  PROCEDURE clearBindValues(ctxHdl IN ctxType);
  PROCEDURE setMetaHeader(ctxHdl IN ctxType, header IN CLOB: = null);
  PROCEDURE setDataHeader(
    ctxHdl IN ctxType,
    header IN CLOB: = null,
    tag IN VARCHAR2: = null
  );
  PROCEDURE setRaiseException(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE setRaiseNoRowsException(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE propagateOriginalException(ctxHdl IN ctxType, flag IN BOOLEAN: = true);
  PROCEDURE getExceptionContent(
    ctxHdl IN ctxType,
    errNo OUT NUMBER,
    errMsg OUT VARCHAR2
  );
  ------------------- generation ----------------------------------------------
  FUNCTION getDTD(ctxHdl IN ctxType, withVer IN BOOLEAN: = false) RETURN CLOB;
  PROCEDURE getDTD(
    ctxHdl IN ctxType,
    xDoc IN CLOB,
    withVer IN BOOLEAN: = false
  );
  FUNCTION getXML(ctxHdl IN ctxType, metaType IN NUMBER: = NONE) RETURN CLOB;
  PROCEDURE getXML(
    ctxHdl IN ctxType,
    xDoc IN CLOB,
    metaType IN NUMBER: = NONE
  );
  FUNCTION getXML(sqlQuery IN VARCHAR2, metaType IN NUMBER: = NONE) RETURN CLOB;
  FUNCTION getXML(sqlQuery IN CLOB, metaType IN NUMBER: = NONE) RETURN CLOB;
  PROCEDURE resetResultSet(ctxHdl IN ctxType);
  FUNCTION getNumRowsProcessed(ctxHdl IN ctxType) RETURN NUMBER;
  -------private method declarations------------------------------------------
  -- we must do this as a bug workaround; otherwise we get ora-600 [kgmexchi11]
  PROCEDURE p_useTypeForCollElemTag(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_useNullAttrInd(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_setSQLToXMLNameEsc(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_setStylesheetHeader(
    ctxHdl IN ctxType,
    uri IN VARCHAR2,
    type IN VARCHAR2
  );
  PROCEDURE p_setXSLT(
    ctxHdl IN ctxType,
    uri IN VARCHAR2,
    ref IN VARCHAR2
  );
  PROCEDURE p_setXSLT(
    ctxHdl IN ctxType,
    stylesheet IN CLOB,
    ref IN VARCHAR2
  );
  PROCEDURE p_setStrictLegalXMLCharCheck(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_setEncodingTag(ctxHdl IN ctxType, enc IN VARCHAR2);
  PROCEDURE p_setMetaHeader(ctxHdl IN ctxType, header IN CLOB);
  PROCEDURE p_setDataHeader(
    ctxHdl IN ctxType,
    header IN CLOB,
    tag IN VARCHAR2
  );
  PROCEDURE p_setRaiseException(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_setRaiseNoRowsExc(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_propOrigExc(ctxHdl IN ctxType, flag IN NUMBER);
  PROCEDURE p_getDTD(
    ctxHdl IN ctxType,
    xDoc IN CLOB,
    withVer IN NUMBER
  );
  PROCEDURE p_getXML(
    ctxHdl IN ctxType,
    xDoc IN CLOB,
    metaType IN NUMBER
  );
  END dbms_xmlquery;

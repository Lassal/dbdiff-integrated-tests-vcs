schema: XDB
name: DOCUMENT_LINKS
updatedAllowed: true
insertAllowed: true
columns:
- name: LINK_FORM
  dataType: VARCHAR2
  textMaxLength: 8
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 8
- name: LINK_TYPE
  dataType: VARCHAR2
  textMaxLength: 8
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 8
- name: SOURCE_ID
  dataType: RAW
  nullable: true
  ordinalPosition: 1
  dataTypeLength:
- name: SOURCE_TYPE
  dataType: VARCHAR2
  textMaxLength: 17
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 17
- name: TARGET_ID
  dataType: RAW
  nullable: true
  ordinalPosition: 2
  dataTypeLength:
- name: TARGET_PATH
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 4000
referencedTables:
- schema: XDB
  name: XDB$D_LINK
- schema: XDB
  name: XDB$RESOURCE
viewDefinition: |-
  SELECT
    dl.source_id,
    dl.target_id,
    dl.target_path,
    decode(
      bitand(sys_op_rawtonum(dl.flags), 1),
      1,
      'Weak',
      decode(
        bitand(sys_op_rawtonum(dl.flags), 2),
        2,
        'Symbolic',
        'Hard'
      )
    ),
    decode(
      bitand(sys_op_rawtonum(dl.flags), 4),
      4,
      'XInclude',
      'XLink'
    ),
    decode(
      bitand(sys_op_rawtonum(dl.flags), 8),
      8,
      'Resource Metadata',
      'Resource Content'
    )
  from
    xdb.xdb$d_link dl,
    xdb.xdb$resource r
  where
    dl.source_id = r.object_id
    and sys_checkacl(
      r.xmldata.acloid,
      r.xmldata.ownerid,
      xmltype(
        '<privilege
        xmlns="http://xmlns.oracle.com/xdb/acl.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://xmlns.oracle.com/xdb/acl.xsd
                            http://xmlns.oracle.com/xdb/acl.xsd
                            DAV: http://xmlns.oracle.com/xdb/dav.xsd">
        <read-properties/>
        <read-contents/>
   </privilege>'
      )
    ) = 1

schema: WMSYS
name: ALL_WORKSPACE_SAVEPOINTS
updatedAllowed: false
insertAllowed: false
columns:
- name: CANROLLBACKTO
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 3
- name: CREATETIME
  dataType: TIMESTAMP(6) WITH TIME ZONE
  numericScale: 6
  nullable: true
  ordinalPosition: 6
  dataTypeLength:
- name: DESCRIPTION
  dataType: VARCHAR2
  textMaxLength: 1000
  nullable: true
  ordinalPosition: 7
  dataTypeLength: 1000
- name: IMPLICIT
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 3
- name: OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 128
- name: POSITION
  dataType: NUMBER
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: REMOVABLE
  dataType: VARCHAR2
  textMaxLength: 3
  nullable: true
  ordinalPosition: 9
  dataTypeLength: 3
- name: SAVEPOINT
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 128
- name: VERSION
  dataType: NUMBER
  nullable: false
  ordinalPosition: 10
  dataTypeLength:
- name: WORKSPACE
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 128
referencedTables:
- schema: WMSYS
  name: ALL_WORKSPACES_INTERNAL
- schema: WMSYS
  name: WM$WORKSPACES_TABLE
- schema: WMSYS
  name: WM$WORKSPACE_SAVEPOINTS_TABLE
viewDefinition: |-
  select
    t.savepoint,
    t.workspace,
    decode(t.is_implicit, 0, 'NO', 1, 'YES') implicit,
    t.position,
    t.owner,
    t.createTime,
    t.description,
    decode(sign(t.version - max .pv), -1, 'NO', 'YES') canRollbackTo,
    decode(
      t.is_implicit || decode(
        parent_vers.parent_version,
        null,
        'NOT_EXISTS',
        'EXISTS'
      ),
      '1EXISTS',
      'NO',
      'YES'
    ) removable,
    t.version
  from
    wmsys.wm$workspace_savepoints_table t,
    wmsys.all_workspaces_internal asi,
    (
      select
        max(parent_version) pv,
        parent_workspace pw
      from
        wmsys.wm$workspaces_table
      group by
        parent_workspace
    ) max,
    (
      select
        unique parent_version
      from
        wmsys.wm$workspaces_table
    ) parent_vers
  where
    t.workspace = asi.workspace
    and t.workspace = max .pw (+)
    and t.version = parent_vers.parent_version (+) WITH READ ONLY

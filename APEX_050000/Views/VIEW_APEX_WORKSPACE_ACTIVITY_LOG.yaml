schema: APEX_050000
name: APEX_WORKSPACE_ACTIVITY_LOG
updatedAllowed: true
insertAllowed: true
columns:
- name: AGENT
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 16
  dataTypeLength: 4000
- name: APEX_SESSION_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 17
  dataTypeLength:
- name: APEX_USER
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: true
  ordinalPosition: 3
  dataTypeLength: 255
- name: APPLICATION_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 4
  dataTypeLength:
- name: APPLICATION_INFO
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 22
  dataTypeLength: 4000
- name: APPLICATION_NAME
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 255
- name: APPLICATION_SCHEMA_OWNER
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 30
- name: CONTENT_LENGTH
  dataType: NUMBER
  nullable: true
  ordinalPosition: 29
  dataTypeLength:
- name: DEBUG_PAGE_VIEW_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 34
  dataTypeLength:
- name: ELAPSED_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 13
  dataTypeLength:
- name: ERROR_MESSAGE
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 18
  dataTypeLength: 4000
- name: ERROR_ON_COMPONENT_NAME
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: true
  ordinalPosition: 20
  dataTypeLength: 255
- name: ERROR_ON_COMPONENT_TYPE
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: true
  ordinalPosition: 19
  dataTypeLength: 255
- name: INTERACTIVE_REPORT_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 23
  dataTypeLength:
- name: IP_ADDRESS
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 15
  dataTypeLength: 4000
- name: IR_SAVED_REPORT_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 24
  dataTypeLength:
- name: IR_SEARCH
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 25
  dataTypeLength: 4000
- name: LOG_CONTEXT
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 12
  dataTypeLength: 4000
- name: PAGE_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 7
  dataTypeLength:
- name: PAGE_NAME
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: true
  ordinalPosition: 8
  dataTypeLength: 255
- name: PAGE_VIEW_MODE
  dataType: VARCHAR2
  textMaxLength: 15
  nullable: true
  ordinalPosition: 21
  dataTypeLength: 15
- name: PAGE_VIEW_TYPE
  dataType: VARCHAR2
  textMaxLength: 23
  nullable: true
  ordinalPosition: 32
  dataTypeLength: 23
- name: REGIONS_FROM_CACHE
  dataType: NUMBER
  nullable: true
  ordinalPosition: 30
  dataTypeLength:
- name: REQUEST_VALUE
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 33
  dataTypeLength: 4000
- name: ROWS_QUERIED
  dataType: NUMBER
  nullable: true
  ordinalPosition: 14
  dataTypeLength:
- name: SECONDS_AGO
  dataType: NUMBER
  nullable: true
  ordinalPosition: 11
  dataTypeLength:
- name: THINK_TIME
  dataType: NUMBER
  nullable: true
  ordinalPosition: 10
  dataTypeLength:
- name: VIEW_DATE
  dataType: DATE
  nullable: true
  ordinalPosition: 9
  dataTypeLength:
- name: WORKSPACE
  dataType: VARCHAR2
  textMaxLength: 255
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 255
- name: WORKSPACE_DISPLAY_NAME
  dataType: VARCHAR2
  textMaxLength: 4000
  nullable: true
  ordinalPosition: 2
  dataTypeLength: 4000
- name: WORKSPACE_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 31
  dataTypeLength:
- name: WS_APPLICATION_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 26
  dataTypeLength:
- name: WS_DATAGRID_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 28
  dataTypeLength:
- name: WS_PAGE_ID
  dataType: NUMBER
  nullable: true
  ordinalPosition: 27
  dataTypeLength:
referencedTables:
- schema: APEX_050000
  name: WWV_FLOWS
- schema: APEX_050000
  name: WWV_FLOW_ACTIVITY_LOG
- schema: APEX_050000
  name: WWV_FLOW_COMPANIES
- schema: APEX_050000
  name: WWV_FLOW_COMPANY_SCHEMAS
- schema: APEX_050000
  name: WWV_FLOW_STEPS
- schema: SYS
  name: DUAL
viewDefinition: |-
  select
    w.short_name workspace,
    w.display_name workspace_display_name,
    l.userid apex_user,
    l.flow_id application_id,
    f.name application_name,
    f.owner application_schema_owner,
    l.step_id page_id,
    (
      select
        name
      from
        wwv_flow_steps
      where
        id = l.step_id
        and flow_id = f.id
    ) page_name,
    l.time_stamp view_date,
    round(
      86400 * (
        l.time_stamp - lag(l.time_stamp) over (
          order by
            l.time_stamp,
            l.flow_id,
            l.userid,
            l.session_id
        )
      )
    ) think_time,
    round(86400 * (sysdate - l.time_stamp)) seconds_ago,
    --l.component_type          component_type,
    --l.component_name          component_name,
    l.component_attribute log_context,
    --l.information             page_view_information,
    l.elap elapsed_time,
    l.num_rows rows_queried,
    l.ip_address ip_address,
    l.USER_AGENT agent,
    l.session_id apex_session_id,
    l.sqlerrm error_message,
    l.sqlerrm_component_type error_on_component_type,
    l.sqlerrm_component_name error_on_component_name,
    decode(
      l.page_mode,
      'D',
      'Dynamic',
      'C',
      'Cache Created',
      'R',
      'Cached',
      'P',
      'Partial Page',
      'A',
      'Page Processing',
      l.page_mode
    ) page_view_mode,
    l.application_info,
    -- ir log
    l.worksheet_id interactive_report_id,
    l.ir_report_id ir_saved_report_id,
    l.ir_search ir_search,
    -- websheet log
    l.websheet_id ws_application_id,
    l.webpage_id ws_page_id,
    l.datagrid_id ws_datagrid_id,
    --
    l.content_length,
    --
    nvl(l.cached_regions, 0) regions_from_cache,
    l.security_group_id workspace_id,
    --
    case
      l.page_view_type
      when 0 then 'Other'
      when 1 then 'Processing'
      when 2 then 'Rendering'
      when 3 then 'AJAX'
      when 4 then 'Logout'
      when 5 then 'Authentication Callback'
    end page_view_type,
    l.request_value,
    l.debug_page_view_id
  from
    wwv_flow_activity_log l,
    wwv_flow_companies w,
    wwv_flows f,
    (
      select
        nvl(v('FLOW_SECURITY_GROUP_ID'), 0) sgid,
        (
          select
            sys_context('USERENV', 'CURRENT_USER')
          from
            sys.dual
        ) cu
      from
        sys.dual
    ) d
  where
    (
      l.security_group_id in (
        select
          security_group_id
        from
          wwv_flow_company_schemas
        where
          schema = cu
      )
      or (
        select
          wwv_flow_security.has_apex_administrator_role_yn(cu)
        from
          sys.dual
      ) = 'Y'
      or d.sgid = l.security_group_id
    )
    and --
    l.security_group_id = w.PROVISIONING_COMPANY_ID
    and l.flow_id = f.id(+)
    and l.time_stamp > sysdate - 14
    and w.PROVISIONING_COMPANY_ID != 0

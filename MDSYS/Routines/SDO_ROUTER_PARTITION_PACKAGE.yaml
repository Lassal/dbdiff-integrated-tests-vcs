schema: MDSYS
name: SDO_ROUTER_PARTITION
routineType: PACKAGE
returnParamater:
  name: MIN_EIGENVECTOR.(--return--)
  dataType: OBJECT
  parameterMode: OUT
  ordinalPosition: 0
parameters:
- name: ADJUST_M.START_M
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 1
- name: ADJUST_M.END_M
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: ADJUST_M.M
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: BUILD_TURN_RESTRICTIONS.LOGDIR
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: BUILD_TURN_RESTRICTIONS.DRIVINGSIDE
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: CLEANUP_ROUTER.ALL_TABLES
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 1
- name: CREATE_ROUTER_NETWORK.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: CREATE_ROUTER_NETWORK.NETWORK_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: CREATE_SDO_ROUTER_LOG_DIR.ROUTER_SCHEMA
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: CREATE_SDO_ROUTER_LOG_DIR.NEW_DIR_PATH
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: CREATE_TRUCKING_DATA.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: CREATE_TRUCKING_DATA.CLEANUP
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 2
- name: CREATE_TURN_RESTRICTION_DATA.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: CREATE_TURN_RESTRICTION_DATA.CLEANUP
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 2
- name: DELETE_ROUTER_NETWORK.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DELETE_ROUTER_NETWORK.NETWORK_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: DELETE_ROUTER_NETWORK.LOG_DELETE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 3
- name: DUMP_PARTITIONS.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DUMP_PARTITIONS.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: DUMP_PARTITIONS.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: DUMP_PARTITIONS.VERBOSE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: DUMP_TRUCKING_DATA.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DUMP_TRUCKING_DATA.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: DUMP_TRUCKING_DATA.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: DUMP_TRUCKING_DATA.SKIP_UNSUPPORTED
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: DUMP_TURN_RESTRICTION_DATA.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DUMP_TURN_RESTRICTION_DATA.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: DUMP_TURN_RESTRICTION_DATA.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: DUMP_TURN_RESTRICTION_DATA.DUMP_SOFT_RESTRICTIONS
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: ELOCATION_DUMP_PARTITION.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_DUMP_PARTITION.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_DUMP_PARTITION.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: ELOCATION_DUMP_PARTITION.VERBOSE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: ELOCATION_DUMP_PARTITION.IS10G
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 5
- name: ELOCATION_DUMP_TRUCKING_DATA.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_DUMP_TRUCKING_DATA.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_DUMP_TRUCKING_DATA.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: ELOCATION_DUMP_TRUCKING_DATA.SKIP_UNSUPPORTED
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: ELOCATION_DUMP_TURN_RESTRICT.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_DUMP_TURN_RESTRICT.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_DUMP_TURN_RESTRICT.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: ELOCATION_DUMP_TURN_RESTRICT.DUMP_SOFT_RESTRICTIONS
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: ELOCATION_PARTITION_ROUTER.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_PARTITION_ROUTER.BLOB_FORMAT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_TRUCKING_DATA.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_TURN_RESTRICT_DATA.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_VALIDATE_LOGFILE.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_VALIDATE_LOGFILE.SCHEMA_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_VALIDATE_PARTITION.LOGFILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: ELOCATION_VALIDATE_PARTITION.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: ELOCATION_VALIDATE_PARTITION.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: ELOCATION_VALIDATE_PARTITION.VERBOSE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: ELOCATION_VALIDATE_PARTITION.IS10G
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 5
- name: GATHER_TABLE_STATS.TABLE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: GET_EDGE_INFO.EDGE_IDS
  dataType: VARRAY
  parameterMode: IN
  ordinalPosition: 1
- name: GET_EDGE_INFO.TO_EDGE_IDS
  dataType: VARRAY
  parameterMode: OUT
  ordinalPosition: 2
- name: GET_EDGE_INFO.RETS
  dataType: VARRAY
  parameterMode: OUT
  ordinalPosition: 3
- name: GET_EDGE_INFO.ANGLE_SEGMENTS
  dataType: VARRAY
  parameterMode: OUT
  ordinalPosition: 4
- name: GET_GEOMETRY_INFO.EDGE_IDS
  dataType: VARRAY
  parameterMode: IN
  ordinalPosition: 1
- name: GET_GEOMETRY_INFO.MERGED_COORDS
  dataType: VARRAY
  parameterMode: OUT
  ordinalPosition: 2
- name: GET_PID.M
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 1
- name: GET_PID.PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: GET_VERSION.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: MIN_EIGENVECTOR.SUM_X2
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 1
- name: MIN_EIGENVECTOR.SUM_Y2
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: MIN_EIGENVECTOR.SUM_XY
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: PARTITION_ROUTER.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: PARTITION_ROUTER.MAX_V_NO
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: PARTITION_ROUTER.DRIVING_SIDE
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 3
- name: PARTITION_ROUTER.NETWORK_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 4
- name: PARTITION_ROUTER.MAX_MEMORY
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 5
- name: PARTITION_ROUTER.CLEANUP
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 6
- name: PARTITION_ROUTER.USE_SECUREFILES
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 7
- name: PARTITION_ROUTER.GENERATE_11G_RESTRICTIONS
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 8
- name: VALIDATE_PARTITIONS.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: VALIDATE_PARTITIONS.START_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 2
- name: VALIDATE_PARTITIONS.END_PID
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 3
- name: VALIDATE_PARTITIONS.VERBOSE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: VALIDATE_SDO_ROUTER_LOG_DIR.LOG_FILE_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
routineDefinition: |-
  PACKAGE SDO_ROUTER_PARTITION AUTHID current_user AS FUNCTION adjust_m(start_m IN NUMBER, end_m IN NUMBER, m IN NUMBER) RETURN NUMBER;
  FUNCTION get_pid(m IN NUMBER, pid IN NUMBER) RETURN NUMBER;
  FUNCTION min_eigenvector(
    sum_x2 IN NUMBER,
    sum_y2 IN NUMBER,
    sum_xy IN NUMBER
  ) RETURN mdsys.vector_2d;
  PROCEDURE cleanup_router(all_tables IN BOOLEAN DEFAULT TRUE);
  PROCEDURE create_sdo_router_log_dir(
    router_schema IN VARCHAR2,
    new_dir_path IN VARCHAR2 DEFAULT NULL
  );
  PROCEDURE partition_router(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    max_v_no IN NUMBER DEFAULT 10000,
    driving_side IN VARCHAR2: = 'R',
    network_name IN VARCHAR: = 'ROUTER_NETWORK',
    max_memory IN NUMBER: = 1.75,
    cleanup IN BOOLEAN DEFAULT TRUE,
    use_securefiles IN BOOLEAN DEFAULT TRUE,
    generate_11g_restrictions IN BOOLEAN DEFAULT TRUE
  );
  PROCEDURE validate_sdo_router_log_dir(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log'
  );
  PROCEDURE create_trucking_data(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    cleanup IN BOOLEAN DEFAULT TRUE
  );
  PROCEDURE create_turn_restriction_data(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    cleanup IN BOOLEAN DEFAULT TRUE
  );
  PROCEDURE dump_partitions(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    start_pid IN NUMBER DEFAULT 0,
    end_pid IN NUMBER DEFAULT -1,
    verbose IN BOOLEAN DEFAULT FALSE
  );
  PROCEDURE dump_trucking_data(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    start_pid IN NUMBER DEFAULT 0,
    end_pid IN NUMBER DEFAULT -1,
    skip_unsupported IN BOOLEAN DEFAULT TRUE
  );
  PROCEDURE dump_turn_restriction_data(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    start_pid IN NUMBER DEFAULT 0,
    end_pid IN NUMBER DEFAULT -1,
    dump_soft_restrictions IN BOOLEAN DEFAULT FALSE
  );
  PROCEDURE validate_partitions(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    start_pid IN NUMBER DEFAULT 0,
    end_pid IN NUMBER DEFAULT -1,
    verbose IN BOOLEAN DEFAULT FALSE
  );
  PROCEDURE gather_table_stats(table_name IN VARCHAR2);
  PROCEDURE get_version(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log'
  );
  PROCEDURE create_router_network(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    network_name IN VARCHAR2: = 'ROUTER_NETWORK'
  );
  PROCEDURE delete_router_network(
    log_file_name IN VARCHAR2: = 'sdo_router_partition.log',
    network_name IN VARCHAR2: = 'ROUTER_NETWORK',
    log_delete IN BOOLEAN: = TRUE
  );
  PROCEDURE elocation_partition_router (
    logfile_name IN VARCHAR2,
    blob_format IN VARCHAR2
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.partition_router(

        java.lang.String, java.lang.String)';
  PROCEDURE elocation_trucking_data (logfile_name IN VARCHAR2) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.create_trucking_data(

        java.lang.String)';
  PROCEDURE elocation_turn_restrict_data (logfile_name IN VARCHAR2) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.create_turn_restriction_data(

        java.lang.String)';
  PROCEDURE elocation_dump_partition (
    logfile_name in VARCHAR2,
    start_pid in NUMBER,
    end_pid in NUMBER,
    verbose in BOOLEAN,
    is10g in BOOLEAN
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpPartition(

        java.lang.String, int, int, boolean, boolean)';
  PROCEDURE elocation_dump_trucking_data (
    logfile_name IN VARCHAR2,
    start_pid IN NUMBER,
    end_pid IN NUMBER,
    skip_unsupported IN BOOLEAN
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpTruckingData(

        java.lang.String, int, int, boolean)';
  -- PLSQL limit, full name elocation_dump_turn_restrict_data
  PROCEDURE elocation_dump_turn_restrict (
    logfile_name IN VARCHAR2,
    start_pid IN NUMBER,
    end_pid IN NUMBER,
    dump_soft_restrictions IN BOOLEAN
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.dumpTurnRestrictionData(

        java.lang.String, int, int, boolean)';
  PROCEDURE elocation_validate_partition (
    logfile_name in VARCHAR2,
    start_pid in NUMBER,
    end_pid in NUMBER,
    verbose in BOOLEAN,
    is10g in BOOLEAN
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.validatePartition(

        java.lang.String, int, int, boolean, boolean)';
  PROCEDURE build_turn_restrictions (
    logdir in VARCHAR2,
    drivingside in VARCHAR2
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.TurnRestriction.buildTurnRestrictions(java.lang.String, java.lang.String)';
  PROCEDURE elocation_validate_logfile(
    logfile_name IN VARCHAR2,
    schema_name IN VARCHAR2
  ) AS LANGUAGE java NAME 'oracle.spatial.router.partitioning.ElocationPartition.validate_logfile(

        java.lang.String, java.lang.String)';
  FUNCTION get_edge_info(
    edge_ids IN sdo_list_type,
    to_edge_ids OUT sdo_list_type,
    rets OUT mdsys.string_array,
    angle_segments OUT sdo_list_type
  ) RETURN mdsys.string_array;
  FUNCTION get_geometry_info(
    edge_ids IN sdo_list_type,
    merged_coords OUT sdo_list_type
  ) RETURN NUMBER;
  END SDO_ROUTER_PARTITION;

schema: XDBPM
name: XDBPM_OPTIMIZE_XMLSCHEMA
routineType: PACKAGE
returnParamater:
  name: DOTYPEANALYSIS.(--return--)
  dataType: VARCHAR2
  parameterMode: OUT
  ordinalPosition: 0
parameters:
- name: DESCRIBEANNOTATIONS.P_RESOURCE_PATH
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DESCRIBEANNOTATIONS.P_SCHEMA_LOCATION_HINT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: DESCRIBEANNOTATIONS.P_OWNER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 3
- name: DOTYPEANALYSIS.P_OUTPUT_FILE
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: DOTYPEANALYSIS.P_TARGET_NAME
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: DOTYPEANALYSIS.P_CONFIGURATION
  dataType: OPAQUE/XMLTYPE
  parameterMode: INOUT
  ordinalPosition: 3
- name: DOTYPEANALYSIS.P_SCHEMA_LOCATION_HINT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 4
- name: DOTYPEANALYSIS.P_OWNER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 5
- name: DOTYPEANALYSIS.P_LIMIT
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 6
- name: PRINTSCHEMAREGISTRATIONSCRIPT.P_SCRIPT_FILE
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: PRINTSCHEMAREGISTRATIONSCRIPT.P_COMMENT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: PRINTSCHEMAREGISTRATIONSCRIPT.P_SCHEMA_ORDERING
  dataType: OPAQUE/XMLTYPE
  parameterMode: IN
  ordinalPosition: 3
- name: PRINTSCHEMAREGISTRATIONSCRIPT.P_XMLSCHEMA_FOLDER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 4
- name: SCHEMAREGISTRATIONSCRIPT.P_OUTPUT_FOLDER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: SCHEMAREGISTRATIONSCRIPT.P_XMLSCHEMA_FOLDER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: SCHEMAREGISTRATIONSCRIPT.P_CONFIGURATION
  dataType: OPAQUE/XMLTYPE
  parameterMode: IN
  ordinalPosition: 3
- name: SCHEMAREGISTRATIONSCRIPT.P_SCHEMA_LOCATION_HINT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 4
- name: SCHEMAREGISTRATIONSCRIPT.P_OWNER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 5
- name: SCHEMAREGISTRATIONSCRIPT.P_LIMIT
  dataType: NUMBER
  parameterMode: IN
  ordinalPosition: 6
- name: SETEVENT.P_EVENT
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: SETEVENT.P_LEVEL
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
- name: SETREGISTRATIONSCRIPTOPTIONS.P_ADD_XDB_NAMESPACE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 1
- name: SETREGISTRATIONSCRIPTOPTIONS.P_DISABLE_DOM_FIDELITY
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 2
- name: SETREGISTRATIONSCRIPTOPTIONS.P_DISABLE_DEFAULT_TABLES
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 3
- name: SETREGISTRATIONSCRIPTOPTIONS.P_REMOVE_APPINFO
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: SETREGISTRATIONSCRIPTOPTIONS.P_CALL_ANNOTATION_SCRIPT
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 5
- name: SETSCHEMAREGISTRATIONOPTIONS.P_LOCAL
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 1
- name: SETSCHEMAREGISTRATIONOPTIONS.P_GENTYPES
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 2
- name: SETSCHEMAREGISTRATIONOPTIONS.P_GENTABLES
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 3
- name: SETSCHEMAREGISTRATIONOPTIONS.P_FORCE
  dataType: PL/SQL BOOLEAN
  parameterMode: IN
  ordinalPosition: 4
- name: SETSCHEMAREGISTRATIONOPTIONS.P_OWNER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 5
- name: SETSCHEMAREGISTRATIONOPTIONS.P_ENABLE_HIERARCHY
  dataType: BINARY_INTEGER
  parameterMode: IN
  ordinalPosition: 6
- name: SETSCHEMAREGISTRATIONOPTIONS.P_OPTIONS
  dataType: BINARY_INTEGER
  parameterMode: IN
  ordinalPosition: 7
- name: TABLECREATIONSCRIPT.P_OUTPUT_FOLDER
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 1
- name: TABLECREATIONSCRIPT.P_TARGET_NAMESPACE
  dataType: VARCHAR2
  parameterMode: IN
  ordinalPosition: 2
routineDefinition: |-
  package XDBPM_OPTIMIZE_XMLSCHEMA authid CURRENT_USER as C_COLUMN_LIMIT constant NUMBER(3): = 975;
  function COLUMN_LIMIT return number deterministic;
  procedure generateTypeSummary;
  procedure schemaRegistrationScript(
    P_OUTPUT_FOLDER VARCHAR2,
    P_XMLSCHEMA_FOLDER VARCHAR2,
    P_CONFIGURATION XMLType,
    P_SCHEMA_LOCATION_HINT VARCHAR2 DEFAULT NULL,
    P_OWNER VARCHAR2 DEFAULT USER,
    P_LIMIT NUMBER DEFAULT 3
  );
  procedure printSchemaRegistrationScript(
    P_SCRIPT_FILE VARCHAR2,
    P_COMMENT VARCHAR2,
    P_SCHEMA_ORDERING XMLTYPE,
    P_XMLSCHEMA_FOLDER VARCHAR2
  );
  procedure describeAnnotations(
    P_RESOURCE_PATH VARCHAR2,
    P_SCHEMA_LOCATION_HINT VARCHAR2,
    P_OWNER VARCHAR2 DEFAULT USER
  );
  function doTypeAnalysis(
    P_OUTPUT_FILE VARCHAR2,
    P_TARGET_NAME VARCHAR2,
    P_CONFIGURATION IN OUT XMLTYPE,
    P_SCHEMA_LOCATION_HINT VARCHAR2 DEFAULT NULL,
    P_OWNER VARCHAR2 DEFAULT USER,
    P_LIMIT NUMBER DEFAULT 3
  ) return VARCHAR2;
  procedure setEvent(P_EVENT VARCHAR2, P_LEVEL VARCHAR2);
  procedure tableCreationScript(
    P_OUTPUT_FOLDER VARCHAR2,
    P_TARGET_NAMESPACE VARCHAR2
  );
  procedure setSchemaRegistrationOptions(
    P_LOCAL BOOLEAN DEFAULT TRUE,
    P_GENTYPES BOOLEAN DEFAULT TRUE,
    P_GENTABLES BOOLEAN DEFAULT TRUE,
    P_FORCE BOOLEAN DEFAULT FALSE,
    P_OWNER VARCHAR2 DEFAULT NULL,
    P_ENABLE_HIERARCHY BINARY_INTEGER DEFAULT DBMS_XMLSCHEMA.ENABLE_HIERARCHY_NONE,
    P_OPTIONS BINARY_INTEGER DEFAULT NULL
  );
  procedure setRegistrationScriptOptions(
    P_ADD_XDB_NAMESPACE BOOLEAN DEFAULT TRUE,
    P_DISABLE_DOM_FIDELITY BOOLEAN DEFAULT FALSE,
    P_DISABLE_DEFAULT_TABLES BOOLEAN DEFAULT FALSE,
    P_REMOVE_APPINFO BOOLEAN DEFAULT FALSE,
    P_CALL_ANNOTATION_SCRIPT BOOLEAN DEFAULT FALSE
  );
  procedure addXDBNamespace;
  procedure disableDOMFidelity;
  procedure disableDefaultTables;
  procedure removeAppInfo;
  procedure annotationScript;
  $IF DBMS_DB_VERSION.VER_LE_10_2 $THEN --
  -- Depricated in 11.1.x : ALL_XML_SCHEMAS now contains column SCHEMA_ID which can be used to get this value.
  --
  function getXMLSchemaRef(P_SCHEMA_LOCATION_HINT VARCHAR2, P_OWNER VARCHAR2) return REF XMLTYPE;
  --
  $END --
  end XDBPM_OPTIMIZE_XMLSCHEMA;

schema: XDBPM
name: MISSING_TYPE_HIERARCHY
updatedAllowed: true
insertAllowed: true
columns:
- name: ATTR_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 4
  dataTypeLength: 128
- name: ATTR_TYPE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 5
  dataTypeLength: 128
- name: ATTR_TYPE_OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: true
  ordinalPosition: 6
  dataTypeLength: 128
- name: OWNER
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 3
  dataTypeLength: 128
- name: TYPE_LEVEL
  dataType: NUMBER
  nullable: true
  ordinalPosition: 1
  dataTypeLength:
- name: TYPE_NAME
  dataType: VARCHAR2
  textMaxLength: 128
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 128
referencedTables:
- schema: XDBPM
  name: TYPE_SUMMARY
- schema: XDBPM
  name: XDBPM_ALL_TYPES
- schema: XDBPM
  name: XDBPM_ALL_TYPE_ATTRS
viewDefinition: |-
  select
    level TYPE_LEVEL,
    ata.TYPE_NAME,
    ata.OWNER,
    ATTR_NAME,
    ATTR_TYPE_NAME,
    ATTR_TYPE_OWNER
  from
    XDBPM.XDBPM_ALL_TYPES at,
    XDBPM.XDBPM_ALL_TYPE_ATTRS ata
  where
    at .TYPE_NAME = ata.TYPE_NAME
    and INHERITED = 'NO'
    and at .OWNER = ata.OWNER
    and not exists (
      select
        1
      from
        TYPE_SUMMARY ts
      where
        nvl(ts.OWNER, 'SYS') = nvl(ata.ATTR_TYPE_OWNER, 'SYS')
        and ts.TYPE_NAME = ata.ATTR_TYPE_NAME
    )
    and not exists (
      select
        syn.SYNONYM_NAME,
        syn.OWNER
      from
        ALL_SYNONYMS syn,
        XDBPM.XDBPM_ALL_TYPES at
      where
        syn.TABLE_NAME = at .TYPE_NAME
        and syn.TABLE_OWNER = at .OWNER
        and syn.SYNONYM_NAME = ata.ATTR_TYPE_NAME
        and syn.OWNER = ata.ATTR_TYPE_OWNER
    )
  connect by
    SUPERTYPE_NAME = prior at .TYPE_NAME
    and SUPERTYPE_OWNER = prior at .OWNER

schema: LBACSYS
name: ALL_SA_USER_COMPARTMENTS
updatedAllowed: true
insertAllowed: true
columns:
- name: COMP
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: false
  ordinalPosition: 3
  dataTypeLength: 30
- name: DEF_COMP
  dataType: VARCHAR2
  textMaxLength: 1
  nullable: false
  ordinalPosition: 5
  dataTypeLength: 1
- name: POLICY_NAME
  dataType: VARCHAR2
  textMaxLength: 30
  nullable: false
  ordinalPosition: 1
  dataTypeLength: 30
- name: ROW_COMP
  dataType: VARCHAR2
  textMaxLength: 1
  nullable: false
  ordinalPosition: 6
  dataTypeLength: 1
- name: RW_ACCESS
  dataType: VARCHAR2
  textMaxLength: 5
  nullable: true
  ordinalPosition: 4
  dataTypeLength: 5
- name: USER_NAME
  dataType: VARCHAR2
  textMaxLength: 1024
  nullable: false
  ordinalPosition: 2
  dataTypeLength: 1024
referencedTables:
- schema: LBACSYS
  name: OLS$COMPARTMENTS
- schema: LBACSYS
  name: OLS$USER_COMPARTMENTS
- schema: LBACSYS
  name: SA$ADMIN
- schema: LBACSYS
  name: SA$POL
viewDefinition: |-
  SELECT
    p.pol_name AS policy_name,
    uc.usr_name AS user_name,
    c .code AS comp,
    DECODE(uc.rw_access, '1', 'WRITE', 'READ') AS rw_access,
    uc.def_comp,
    uc.row_comp
  FROM
    LBACSYS.sa$pol p,
    LBACSYS.ols$user_compartments uc,
    LBACSYS.ols$compartments c
  WHERE
    p.pol# = uc.pol#
    AND uc.pol# = c .pol#
    AND uc.comp# = c .comp#
    AND (
      p.pol# in (
        select
          pol#
        from
          LBACSYS.sa$admin
        where
          usr_name = user
      )
      or uc.usr_name = sa_session.sa_user_name(lbac_cache.policy_name(p.pol#))
    )
